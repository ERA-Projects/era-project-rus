### Версия 2.163

- hotfix


### Версия 2.162

- hotfix


### Версия 2.161

#### ERA:
	- ВНИМАНИЕ! примеры использования всех нововведений находятся в файле "/Help/Era manual/era iii changelog.txt" или просто щелкните по версии ERA в главном меню игры;
- ## обновление ядра era.dll до версии 3.9.24:
	- Изменен менеджер памяти на FastMM4. Теперь игра использует менеджер памяти из Era и управляет отдельной статистикой выделения.
	- Реализовано подробное отслеживание выделенной памяти игрой, Era и плагинами. Отчет о памяти записывается в "log.txt" при сбое или событии "OnGenerateDebugInfo" (вызывается F11).
	- Экспортированы следующие функции в era.dll:
		- Функции памяти, которые теперь являются общими для игры и движка Era. Они будут использоваться в Era SDK для перенаправления менеджеров памяти плагинов в менеджер памяти Era:
		```
		function MemAlloc (BufSize: integer): {n} pointer; stdcall;
		```
		```
		procedure MemFree ({On} Buf: pointer); stdcall;
		```
		```
		function MemRealloc (var {On} Buf: pointer; NewBufSize: integer): {n} pointer; stdcall;
		```
		- Регистрирует потребителя памяти (плагин с пользовательским менеджером памяти) и возвращает адрес счетчика выделенной памяти, который должен атомарно увеличиваться и уменьшаться в операциях malloc/calloc/realloc/free:
		```
		function RegisterMemoryConsumer (ConsumerName: pchar): pinteger; stdcall;
		```
	- Улучшено обнаружение недопустимого использования буферов памяти Era из API Era плагинами. Попытки освободить буферы результатов с помощью другого API менеджера памяти ранее игнорировались и теперь, скорее всего, приведут к сбоям.
	- Исправлена утечка памяти в LoadPcx8: изображение-заглушка pcx8 создавалось при любом запросе GetPcx8, если существовала соответствующая замена png, а заглушка не была должным образом зарегистрирована в дереве ресурсов игры, что приводило к ошибкам нехватки памяти и могло привести к повреждению сохраненной игры.

#### WoG:
- обновлен плагин "wog native dialogs.era":
	- критическое исправление управлением памятью плагина;
- обновлен плагин "game bug fixes extended.dll":
	- критическое исправление управлением памятью плагина;
- обновлен плагин "RMG_CustomizeObjectProperties.era":
	- удален лишний текст в сообщении наград после разграбления банка существ;
- исправлен текст при посещении Складов.

#### WoG Scripts:
- опция "Игра в карты в Тавернах": игра больше не будет заменять объекты на таверны на случайных картах;
- опция "Орлиный Глаз I": добавлена функция для установки максимального уровня заклинания, которон может выучить герой при повышении уровня:
```
!?FU(WOG_103_Hero_GetMaxSpellLevel);
!#VA(heroId:x) (result:x);
```

#### Game Enhancement Mod:
- небольшие исправления в текстах мода;


### Версия 2.160

#### ERA:
- ## обновление ядра era.dll до версии 3.9.23:
	- Обновлен плагин vfs.dll для возможности получения списка модов через API.
	- Улучшена обработка сбоев Era и генерация отчетов об отладке:
		- Era заранее выделяет 5 МБ и резервирует еще 15 МБ для генерации отчетов об отладке в ситуациях нехватки памяти.
		- Улучшен дамп памяти ERM. Для генерации отчета произвольного размера требуется всего 1 МБ.
		- Добавлена регистрация статистики менеджера памяти Era во время сбоев из-за нехватки памяти. Она записывается в "log.txt".
		- Исправлен неверный расчет поля "Общий размер разделов" при генерации отчета об ошибке во время сохранения игры.


### Версия 2.159

#### ERA:
- ## обновление ядра era.dll без изменения версии:
	- Реализовано сохранение дополнительной отладочной информации для отчетов о сбоях:
		- Если во время сохранения игры произойдет сбой, будет записана полная информация о разделах сохраненной игры и будет создан каталог "Debug/Era/Savegame Sections" с содержимым сохраненной игры.
		- Отчет о памяти записывается в "log.txt". "PagefileUsage" - это общий объем зарезервированной памяти (как в оперативной памяти, так и в файле подкачки). "WorkingSetSize" - это объем физической оперативной памяти, используемый процессом.

#### WoG:
- обновлён плагин "ERA_MultilingualSupport.era":
	- добавлена возможность переводить текст из следующих txt-файлов с помощью json ключей:
		- artevent.txt
		- artraits.txt
		- crgen1.txt
		- crtrait0.txt
		- crtraits.txt
		- objnames.txt
		- zcrgn1.txt
		- zcrtrait.txt
	- Поскольку эти файлы читаются при запуске игры, после смены языка в игре потребуется её перезапуск, чтобы новый текст (если существует), был записан в память игры поверх наименований из txt-файлов;
	- Ключи для перевода строк следующие
		- для Артефактов доступны замена имени, описания и текста при поднятии на Карте Приключений:
		```
		"era.artifacts.[art_id].name": string,
		"era.artifacts.[art_id].description": string,
		"era.artifacts.[art_id].event": string
		```
		- для Существ доступны замена имени в единственном числе, множественном числе и описания способностей:
		```
		"era.monsters.[monster_id].name.singular": string,
		"era.monsters.[monster_id].name.plural": string,
		"era.monsters.[monster_id].name.description": string
		```
		- для Объектов Карты Приключений доступны замена имени стандартных объектов и Жилищ существ (тип 17):
		```
		"era.objects.[object_type]": string,
		"era.objects.17.[object_subtype]": string
		```
	- в дальнейшей возможна поддержка большего количества txt-файлов (в том числе и связанных с героями);

#### WoG Scripts:
- Кармические битвы: исправлено некорректный уровень для существ из Крепости;


### Версия 2.158

#### Game Enhancement Mod:
- Восстановлено сообщение о полученном золоте после битвы для Командира "Зверь";

#### Other:
- SD Менеджер Модов (@SyDr) обновлён до версии 0.98.59;


### Версия 2.157

#### WoG:
- обновлен плагин "wog native dialogs.era":
	- исправлена невозможность встречи героев внутри города в режиме "хот-сит" для не красного игрока;

#### Game Enhancement Mod:
- Добавлена расширенный диалог подсказки для объекта "Чёрный Рынок":
	- при нажатии ПКМ на посещённом Чёрном Рынке отображается диалог с ценами всех доступных там артефактов;
	- при наведении мыши на объект в текст подсказки добавляется количество доступных артефактов;
- Добавлен текст с инструкциями создания отчёта об ошибке в сообщение вылета из игры;
- удалены лишние файлы;


### Версия 2.156

#### ERA:
- ## обновление ядра era.dll без изменения версии


### Версия 2.155

#### WoG:
- обновлен плагин "game bug fixes extended.dll":
	- фикс вылета игры при клике пкм в жертвенном алтаре на кнопку "Следующий артефакт" 
	- Исправление бага SoD: При проверке возможности наложения заклинаний Чародеи теперь учитывают все отряды, а не только первый с каждой стороны
- обновлен плагин "RMG_CustomizeObjectProperties.era":
	- добавлена возможность давать мифрил в качестве награды банкам существ (дописывается 8-м элементов в графу наград ресурсов);
	- добавлена возможность управлять генерацией свитков с заклинаниями:
		- Для заклинаний каждого уровня теперь можно выставить ценность, плотность генерации, ограничение на карту и на зону 
		- Заклинания "Дверь Измерений", "Городской Портал", "Полёт" и "Хождение по Воде" теперь имеют псевдоуровень во время генерации равный 6, и имеют собственные настройки генерации (ценность установлена на 12500).
		- Свитки с Водными Заклинаниями теперь не генерируются на карте без воды;
		- выставлены ограничения на зону и карту для всех свитков с заклинаниями всех уровней
		- Управление параметрами доступно через ключи, где [spell_level] от 1 до 6 :
		```
		"RMG.objectGeneration.93.[spell_level].map": int,
		"RMG.objectGeneration.93.[spell_level].zone": int,
		"RMG.objectGeneration.93.[spell_level].value": int,
		"RMG.objectGeneration.93.[spell_level].density": int
		```
- Исправлена некорректная расстановка отрядов в Погосте для 7-го отряда, что приводило к вылету при добавлении командира в данный банк существ;

#### WoG Scripts:
- Добавлены ограничения в количество WoG-объектов, генерируемых ГСК;

#### Game Enhancement Mod:
- Заменена способность Опыта Существ "Огненный шар" для Магогов и Кошмаров на "Проклятие" (поскольку ИИ не знает об этой способности).

#### ERA Scripts:
- Третий класс: исправлено несоответствие количеству вторичных навыков.

#### ERA ERM Framework:
- добавлена константа с адресом стандартного текстового буфера игры;
- добавлена константа с размером структуры BattleStack;

#### Other:
- небольшие исправления описаний


### Версия 2.154

#### WoG:
- обновлен плагин "wog native dialogs.era":
	- Экран встречи героев в городе:
		- добавлена кнопка с горячей клавишей "E"
		- переписана механика:
		- теперь только если ход активного игрока;
		- исправлено срабатывание кнопок диалога города;
		- исправлена редкая ошибка с блокировкой экрана города
	- добавлена горячая клавиша "ESC" для закрытия HMS
- обновлен плагин "game bug fixes extended.dll":
	- исправлена ошибка WoG ERM !!CB:M: она устанавливала максимальный тип монстра на 196 (Драколич), если тип/число монстра проверялось/устанавливалось в качестве награды, если тип существа был выше 196;

#### Game Enhancement Mod:
- обновлен плагин "GameplayEnhancementsPlugin.era":
	- исправлено не обновление последних 8 пикселей диалога Карты Приключений;
	- Исправлено закрытие любого всплывающего диалога, если уже был другой диалог, вызванный ранее;
	- Добавлена совместимость со скриптами;
	- Рефакторинг и оптимизация кода;


### Версия 2.153

#### WoG:
- updated plugin "game bug fixes extended.dll":
	- теперь кадры с бонусом или штрафом удачи и морали выше 1 отображает бонус и на картинке (ранее всегда отображалось 1)
	- Исправлен расчет урона для юнитов с низкой защитой;
- Улучшено описание заклинания "Палач";
- Исправлены сообщения об ошибках редактора карт от WoG-объектов;


### Версия 2.152

- hotfix


### Версия 2.151

#### ERA:
- ВНИМАНИЕ! примеры использования всех нововведений находятся в файле "/Help/Era manual/era iii changelog.txt" или просто щелкните по версии ERA в главном меню игры;
- ## обновление ядра era.dll без изменения версии:
	- Включен флаг "NXCOMPAT:NO" в исполняемых файлах h3era.exe и h3wmaped.exe, тем самым сигнализируя ОС, что эти исполняемые файлы не поддерживают DEP (Data Execution Prevention). Это изменение можно выполнить для любого пользовательского исполняемого файла, запустив "editbin.exe /NXCOMPAT:NO path_to_exe" из утилит Visual Studio.
	- Улучшена команда CM:H, чтобы всегда возвращать действительные идентификаторы героев из SwapManager даже в событиях без щелчка (-1, если диалог встречи героев не активен).
	- Исправлена ошибка с повреждением памяти, приводившая к случайным сбоям. Ошибка появилась в версии 3.9.16.
	- Исправлена ошибка Heroes 3: контрольные слова объектов карты приключений интерпретировались неправильно из-за использования арифметического сдвига вместо логического. Спасибо MoP за информацию.

#### WoG:
- обновлен плагин "game bug fixes extended.dll":
	- удалена генерация почвы "подземелье" на поверхности;

#### Advanced Classes Mod:
- Добавлен отсутствующий текст/анимация/звук для заклинания «Гипноз», наложенного командиром Суккуба.
- Исправлена совместимость между опциями «Знать» и «Достижение».
- Экспорт строки вставки из erm в json.

#### ERA Scripts:
- Remagic: Исправлено отсутствие ".es" в новых описаниях заклинаний.
- Bounty Hunting: Исправлено неверное название ресурсов.
- Драконьи Города: Исправлена возможность перестроить Утопию, когда она находится на краю карты, что впоследствии приводило к проблемам.

#### Game Enhancement Mod:
- Заменена способность опыта существ колдовство Волны Смерти Личами и Кошмарами "Печаль" Продвинутого уровня.
- Удалены плагины:
	- "Hawaiing_DlgEdit_Keypad_Support.era"
	- "Hawaiing_hero_def.era"
	- "Hawaiing_town_def.era"
- обновлен плагин "GameplayEnhancementsPlugin.era":
	- Добавлена поддержка цифровой клавиатуры для ввода цифр;
	- Добавлена возможность устанавливать пользовательский вид для героев на карте приключений:
		- Установить пользовательский вид для героя-мужчины класса [class_id]:
		```
		"gem_plugin.map_item_view.54.class.[class_id].0": string
		```
		- Установить пользовательский вид для героя-женщины класса [class_id]:
		```
		"gem_plugin.map_item_view.54.class.[class_id].1": string
		```
		- Установить пользовательский вид для точного heroId:
		```
		"gem_plugin.map_item_view.54.id.[hero_id]": string
		```
	- Добавлена возможность устанавливать пользовательский вид для разных уровней городов на карте приключений:
		- Установить пользовательский вид только для построенного форта:
		```
		"gem_plugin.map_item_view.98.[town_type].fort": string
		```
		- Установить пользовательский вид только для построенной цитадели:
		```
		"gem_plugin.map_item_view.98.[town_type].citadel": строка
		```

#### WoG Scripts:
- Командирские хижины ведьм: исправлена картинка основных навыков командира.


### Версия 2.150

#### WoG:
- обновлен плагин "RMG_CustomizeObjectProperties.era" до версии 1.13:
	- добавлена возможность заменять свойства уже существующим объектам в текстовиках. Теперь можно изменить почвы для генерации объекта без необходимости редактировать оригинальные файлы игры. Ключом для определения замены свойств будет имя def, тип и подтип объекта;
	- исправлен оригинальный баг генерация Врат Подземного Мира для зон с разными почвами
- добавлена генерация снежных объектов ВМЕСТО обычных на снегу;

#### WoG Graphics Fix Lite:
- в список объектов игры добавлены вся графика мода, что раньше требовала текстовики;

#### WoG Scripts:
- Улучшенные артефакты командиров: теперь артефакты не будут добавлять запрещенные вторичные навыки


### Версия 2.149

#### WoG:
- обновлен плагин "RMG_CustomizeObjectProperties.era":
	- добавлена тонкая настройка для расстановки нападающих и защищающихся отрядов в Банках Существ. Для конкретного подтипа можно установить позиции для нападающих и защищающихся отрядов. Имейте в виду, что повторяющиеся позиции поместят несколько отрядов в одну точку, что может привести к вылету во время битвы:
	```
	"RMG.objectGeneration.16.[object_subtype].defenderPositions": int array
	"RMG.objectGeneration.16.[object_subtype].attackerPositions": int array
	```
	- Изменено расположение защитников в Погосте и Вертепе;
- обновлён плагин "ERA_MultilingualSupport.era":
	- исправлен вылет при старте игры в режиме отладки;
	- добавлен файл отладки в папку "DebugMaps";
- Обновлена китайская локализация.

#### Advanced Classes Mod:
- Улучшен расчет урона М/ГМ Лидерства для совместимости со сторонними скриптами.
- Синхронизировано изменение с опций "Артефакты Рюкзака".

#### Advanced Difficulties Mod:
- небольшие корректировки текста

#### ERA Scripts:
- Зомби-трупоед: Исправлено потребление HP, когда Зомби-трупоед изучает Удар по всем вокруг.

#### Game Enhancement Mod:
- Восстановлена прокрутка вторичных навыков командиров в диалоге командира;
- Исправлена потеря опыта существ после переигровке боя
- Исследование заклинаний: исправлена ошибка erm на некоторых пользовательских картах.
- Исправлен сбой при входе на поле боя
- исправлено описание святилищ для заклинаний, предоставляемых артефактами

#### Human AI:
- Исправлена совместимость с опцией "Ограничение количества героев".

#### TrainerX:
- Теперь трейнер учитывает опцию wog "Отключить чит-коды и меню". Если опция включена, TrainerX будет отключен.


### Версия 2.148

#### ERA:
	- ВНИМАНИЕ! примеры использования всех нововведений находятся в файле "/Help/Era manual/era iii changelog.txt" или просто кликните по версии ERA в главном меню игры;
- ## обновление ядра era.dll до версии 3.9.21:
	- Включены современные исходники LuaJit2 OpenResty x86 и скомпилированные lua51.dll, luajit.exe без зависимостей VC++ и с частичной совместимостью с Lua 5.2.

	- Добавлены следующие функции в Era Erm Framework:
	```
	!?FU(ReadJsonIntArray);
	; Считывает целочисленный массив из конфигурации json либо в существующий динамический массив, либо в автоматически созданный локальный.
	!#VA(jsonKeyPtr:x); Полный ключ JSON, например "test.guards" для { "test": { "guards": [1, 2, 3, 4] } }
	!#VA(intArray:x); ВХОД/ВЫХОД. Либо существующий идентификатор динамического массива, либо ?(localArrayId:y).

	Пример:

	!?FU(OnAfterErmInstructions);
	!!FU(ReadJsonIntArray):P^test.guards^/?(arr:y);
	!!FU(Array_Join):P(arr)/?(text:z)/^, ^;
	!!IF:M^%(text)^;
	```
	```
	!?FU(ReadJsonStrArray);
	; Считывает массив строк из конфигурации json либо в существующий динамический массив, либо в автоматически созданный локальный.
	!#VA(jsonKeyPtr:x); Полный ключ JSON, например "test.names" для { "test": { "names": ["daemon", "corwin", "deo"] } }
	!#VA(strArray:x); ВХОД/ВЫХОД. Либо идентификатор существующего динамического массива, либо ?(localArrayId:y).

	Пример:

	!?FU(OnAfterErmInstructions);
	!!FU(ReadJsonStrArray):P^test.names^/?(arr:y);
	!!FU(Array_Join):P(arr)/?(text:z)/^, ^;
	!!IF:M^%(text)^;
	```
	- Функция GenerateDebugInfo (вызываемая F11) теперь очищает каталог отладки, но сохраняет "log.txt". То же самое касается исключений в игре (вылетов).
	- Улучшено обнаружение вылетов и выгрузка отладочной информации во время генерации сохраненной игры.
	- Исправлен префикс пути к изображениям для использования обратных слешей в качестве разделителей пути в диалогах IF:D.
	- Исправлен диалог IF:D: кнопка отмены должна быть включена по умолчанию.

#### WoG:
- добавлены 2 новых банка существ, отключенных для генерации по умолчанию;
- максимальное количество уникальных подтипов банков существ объекта типа "16" на каждую зону установлено на 5 по умолчанию;

#### Advanced Classes Mod:
- Исправлена возможная ошибка с магической артиллерией, если у противника нет Символа Знаний.

#### Other:
- реорганизация списка модов и файлов в них;


### Версия 2.147

#### WoG:
- обновлен плагин "RMG_CustomizeObjectProperties.era":
	- исправлено, что монстры никогда не убегают и разделяются до максимальных стеков;

#### Game Enhancement Mod:
- добавлены новые объекты для подсказок на карте приключений;
- некоторым подсказкам изменено положение по высоте;
- для героев в качестве подсказки рисуется потрет на карте приключений;


### Версия 2.146

#### WoG:
- обновлен плагин "RMG_CustomizeObjectProperties.era":
	- теперь добавление звуков окружения объектов не будет работать, если загружены другие плагины, вносящие те же изменения;
- реорганизация файлов, добавляющих объекты;
- подготовка к переносу json-файлов в zip-архивы;

#### Advanced Classes Mod:
- Исправлена вероятность призыва Огненного Элементаля при атаке отряда с Мастерским/Грандмастерским Огненным щитом.

#### Game Enhancement Mod:
- Исправлена возможность нанести ответный  удар, если отряд был уничтожен Огненным щитом.


### Версия 2.145
- hotfix


### Версия 2.144

#### ERA:
- обновлены файлы до актуальной версии ERA из официального установщика;

#### WoG:
- обновлен плагин "RMG_CustomizeObjectProperties.era":
	- добавлена поддержка зацикленный звуков для новых и текущих объектов. Установка значения пустой строки отключит звук для уже заданного объекта. Примеры использования:
		- Установить зацикленный звук для определённого подтипа указанного типа объекта:
		```
		"RMG.objectGeneration.[object_type].[object_subtype].sound.loop": string
		```
		- Установить зацикленный звук для всех подтипов указанного типа объекта:
		```
		"RMG.objectGeneration.[object_type].sound.loop": string
		```
	- добавлен .dbgmap файл отладки;
- добавлены звуки окружения хотовским объектам;

#### Game Enhancement Mod:
- исправлена рассинхронизация в PvP битвах при удержании открытым любого диалога одним из игроков;

#### Other:
- обновлён движок Lua до актуального;


### Версия 2.143

#### ERA:
	- ВНИМАНИЕ! примеры использования всех нововведений находятся в файле "/Help/Era manual/era iii changelog.txt" или просто кликните по версии ERA в главном меню игры;
- ## обновление ядра era.dll до версии 3.9.20:
	- Добавлена поддержка отладки случайных чисел в log.txt. Эта функция контролируется опцией "Debug.Rng" в "heroes 3.ini".
	- Исправлена ошибка, появившаяся в 3.9.16: улучшение CombatManager::CastSpell использовалось для проверки уровня стека заклинаний вместо длительности заклинания.

#### WoG:
- обновлен плагин "RMG_CustomizeObjectProperties.era":
	- добавлена возможность устанавливать пользовательское значение ИИ для генерации охраны. Неустановленное значение или значение меньше "0" не изменит ИИ-ценность монстра:
		- Установить ИИ-ценность для каждого стража монстра:
		```
		"RMG.objectGeneration.54.[monster_id].value": int
		```
		- Установите ИИ-ценность для ВСЕХ стражей монстров (зачем вам это нужно :thinking:?):
		```
		"RMG.objectGeneration.54.value": int
		```

#### Game Enhancement Mod:
- исправлена редкая ошибка подсказки;


### Версия 2.142

#### HD Mod:
- Обновлен до версии 5.5 R38;

#### Game Enhancement Mod:
- GameplayEnhancementsPlugin:
	- Теперь подсказки на для объектов рисуются поверх тумана войны;
	- Теперь подсказки на для объектов рисуются над входом в объект, если тот виден;


### Версия 2.141

#### ERA:
	- ВНИМАНИЕ! примеры использования всех нововведений находятся в файле "/Help/Era manual/era iii changelog.txt" или просто кликните по версии ERA в главном меню игры;
- ## обновление ядра era.dll до версии 3.9.19:
	- Добавлена автоматическая перерисовка сетки и выделения после использования BM:Q на неактивном стеке.
	- Добавлены следующие функции в Era Erm Framework:
		```
		!?FU(EmptyIniCache);
		; Заменяет кэш ini-файла в памяти на пустой. Используйте его для повторного создания ini-файлов с нуля, когда вам не нужны ранее кэшированные данные и исходный файл на диске
		!#VA(filePathPtr:x); Абсолютный или относительный путь к ini-файлу
		```
		```
		!?FU(MergeIniWithDefault);
		; Загружает два ini-файла и объединяет исходные ini-записи с целевыми ini-записями в кэше без перезаписи существующих записей
		!#VA(targetPathPtr:x); Абсолютный или относительный путь к целевому ini-файлу (основные настройки)
		!#VA(sourcePathPtr:x); Абсолютный или относительный путь к исходному ini-файлу (настройки по умолчанию)
		```
	- Реорганизован и улучшен API обработки ini. Следующие функции были экспортированы/обновлены:
		```
		(* Забывает все кэшированные данные для указанного ini-файла. Любая операция чтения/записи приведет к его повторному чтению и повторному анализу *)
		procedure ClearIniCache (const FileName: pchar); stdcall;
		```
		```
		(* Забывает все кэшированные данные для всех ini-файлов *)
		procedure ClearAllIniCache; stdcall;
		```
		```
		(* Заменяет кэш ini-файла в памяти на пустой. Используйте его для воссоздания ini-файлов с нуля, когда вам не нужны ранее кэшированные данные и исходный файл на диске *)
		procedure EmptyIniCache (const FileName: pchar); stdcall;
		```
		```
		(* Читает запись из кэша в памяти. Автоматически загружает ini-файл с диска, если он еще не кэширован *)
		function ReadStrFromIni (const Key: pchar; const SectionName: pchar; FilePath: pchar; out Res: pchar): boolean; stdcall;
		```
		```
		(* Записывает и записывает в кэш в памяти. Автоматически загружает ini-файл с диска, если он еще не кэширован *)
		function WriteStrToIni (const Key, Value, SectionName: pchar; FilePath: pchar): boolean; stdcall;
		```
		```
		(* Загружает и анализирует ini-файл. Создает кэш в памяти для предотвращения дальнейших обращений к диску. Возвращает true только в том случае, если файл существовал, был успешно прочитан и проанализирован.
		Создает пустую запись в кэше в случае любой ошибки *)
		function LoadIni (FilePath: pchar): boolean; stdcall;
		```
		```
		(* Сохраняет кэшированный ini в указанный файл на диске. Автоматически воссоздает все каталоги в пути к файлу. Загружает содержимое файла с диска, если оно не было кэшировано ранее. *)
		function SaveIni (FilePath: pchar): boolean; stdcall;
		```
		```
		(* Загружает два ini-файла и объединяет исходные ini-записи с целевыми ini-записями в кэше без перезаписи существующих записей *)
		procedure MergeIniWithDefault (TargetPath, SourcePath: pchar); stdcall;
		```
	- Включен исходный код библиотеки Era B2 в "Tools/Era/Sources/Era B2 Library".
	- "OnRemoteEvent" больше не срабатывает для вызова FU:D. Era теперь использует FireRemoteEvent для синхронизации создания объектов на карте приключений в многопользовательском режиме.

#### HD Mod:
- Обновлен до версии 5.5 R37;

#### WoG:
- обновлён плагин "RMG_CustomizeObjectProperties.era":
	- исправлен вылет при генерации водных карт;
	- исправлено удаление настроек диалога

#### WoG Scripts:
- Рост популяции нейтральных городов: добавлена возможность не влиять на увеличение охраны Банков Существ по ключу:
```
"RMG.objectGeneration.[type].[subtype].isNotBank": bool
```
- Улучшения за мифрил: Добавлена поддержка высокоуровневых заклинаний для Магических Святынь;

#### WoG Graphics Fix Lite:
- Обновлён до версии 2.20.2

#### Other:
- SD Менеджер Модов (@SyDr) обновлён до версии 0.98.53;


### Версия 2.140

#### WoG:
- обновлён плагин "RMG_CustomizeObjectProperties.era":
	- исправлено сохранение настроек диалога;
- теперь генерация WoG-объектов (тип 63) возможна лишь при включённом моде WoG Scripts;
- удалена генерация некоторых снежных объектов;


### Версия 2.139
- hotfix


### Версия 2.138

#### Game Enhancement Mod:
- Исправлена подсказка для стража прохода;

#### Other:
- восстановлен ярлык для запуска Редактора Карт через Лаунчер;


### Версия 2.137
- hotfix


### Версия 2.136

#### HD Mod:
- Обновлен до версии 5.5 R36;

#### Advanced Classes Mod:
- Исправлена потеря опыта за существ, убитых артиллерией/баллистой.

#### WoG Scripts:
- Артиллерия: исправлена потеря опыта за существ, убитых превентивным выстрелом Баллисты;

#### Other:
- новый Менеджер Модов (@SyDr) обновлён до версии 0.98.51
- удалены некоторые лишние файлы;


### Версия 2.135

#### ERA:
- ## обновление ядра ERA.dll до версии 3.9.18:
	- Реализована автоматическая перерисовка тени/сетки/границы выделения после вызова BM:C.
	- Исправлена ошибка, появившаяся в версии 3.9.16: глобальные скрипты загружались и анализировались во время загрузки сохраненной игры.

#### Advanced Classes Mod:
- добавлена отсутствующая проверка идентификатора героя при расчете урона командира Fire Mage
- добавлена проверка Orb of Tempestuous Fire при расчете урона Fire Mage (+25%)

#### Other:
- Утилита "UncToBin" для преобразования команд UN:C ERM в двоичные патчи, теперь поддерживает смещения от адреса в памяти;
- Обновлены источники Era и VFS в "Tools/Era/Sources".


### Версия 2.134

#### ERA:
> [!IMPORTANT]
> Критическое исправление загрузки сохраненных игр!
- в список изменений ERA добавлена информация о работе ГСЧ в мультиплеерных играх. Файл находится по пути "/Help/Era manual/era iii changelog.txt", или просто кликните по версии ERA в главном меню игры, чтобы открыть его;

#### Game Enhancement Mod:
- GameplayEnhancementsPlugin: исправлено отображение подсказок для неактивного окна;


### Версия 2.133

#### ERA:
	- ВНИМАНИЕ! примеры использования всех нововведений находятся в файле "/Help/Era manual/era iii changelog.txt" или просто кликните по версии ERA в главном меню игры;
- ## обновление ядра ERA.dll до версии 3.9.17:
	- Добавлена поддержка ввода IME (Input Method Editor), используемого азиатскими языками (китайский/японский/корейский).
	- Добавлена поддержка каталога "Lang/\*" для zip-архивов в Data
	- Введен еще один каталог для скриптов глобальной библиотеки ERM: "Data/s/lib_end". Скрипты из этого каталога будут загружаться после всех остальных скриптов карт/глобальных/библиотек.
	Аналогично каталогу "lib", эти скрипты не зависят от состояния опции UN:P5 WoG.
	- Улучшена функция CombatManager::CastSpell (также используется в BM:C) путем временной установки CombatManager->ControlSide в сторону, что позволяет контролировать стек кастов.
	- Переписаны команды IF:D, IF:F, IF:E (многоцелевая реализация диалога). Особенности:
	- Всякий раз, когда строка принимается в качестве параметра, это может быть любая строка или строковый литерал. Значение будет скопировано в глобальные настройки, больше нет зависимости от z-переменных.
	- Идентификаторы диалога полностью игнорируются (лучше использовать для них 0 или -1 для удобства чтения). В памяти находится только одна копия настроек диалога.
	- Настройки диалога полностью очищаются перед выполнением IF:D и после выполнения IF:E.
	- Исправлены ошибки с фантомными пустыми строками вместо путей к изображениям или подсказок.
	- IF:F принимает 0..6 параметров. Пустой параметр означает «удалить подсказку».
	- IF:E принимает следующие синтаксисы: IF:E(индекс v-var для сохранения результата) или IF:E?(любая целочисленная переменная для сохранения результата).
	- Расширенная команда VR:R с необязательным 4-м параметром: VR:R(фиктивный)/(мин)/(макс)/(свободный_параметр);:
	- В сетевых сражениях используется детерминированный генератор случайных значений, который генерирует значения с использованием текущего идентификатора действия, идентификатора раунда и идентификатора битвы. Попытка сгенерировать несколько случайных значений в одном действии дает одинаковые значения, например 44 44 44. Чтобы обойти эту проблему, передайте уникальное значение 4-му параметру для каждой итерации. Это может быть идентификатор стека или счетчик цикла, но лучше использовать XOR с предварительно сгенерированной константой int32, уникальной для эффекта/заклинания/функции, которые вы реализуете. Например, 1833290248 XOR идентификатор стека — хороший выбор.
	- Добавлена поддержка Phoenix Ressurection и Death Stare в сетевых сражениях PvP.
- Обновлен "Era Erm Framework":
	- Добавлена поддержка существ, стреляющих по области, в функцию BattleStack_Shoot.
	- Синхронизировано с версией Launcher "Era Erm Framework".
- Добавлены следующие типы экспорта и функции в era.dll:
	```
    Настраиваемый диалог с 4 внешними/внутренними картинками (bmp/jpg/png/pcx/pcx16,def?), необязательным полем ввода и 4 выбираемыми кнопками с флажками.
    Все указатели могут быть нулевыми. Все поля должны быть доступны для записи процедурами обработки диалога и должны считаться "грязными" после обработки диалога, за исключением поля, куда записываются результирующие значения.
	```
	- PMultiPurposeDlgSetup = ^TMultiPurposeDlgSetup;
	- TMultiPurposeDlgSetup = упакованная запись
	```
    Заголовок:             pchar;                 // Верхний заголовок диалога
    InputFieldLabel:   pchar;                 // Если указано, пользователь сможет ввести произвольный текст в поле ввода
    ButtonsGroupLabel: pchar;                 // Если указано, будет отображена правая группа кнопок
    InputBuf:          pchar;                 // OUT. Поле для записи указателя на временный буфер с пользовательским вводом. Немедленно скопируйте этот текст в безопасное место
    SelectedItem:      integer;               // OUT. Поле для записи индекса выбранного элемента (0-3 для кнопок, -1 для отмены)
    ImagePaths:        массив [0..3] из pchar; // Все пути указаны относительно корневого каталога игры или абсолютных пользовательских путей
    ImageHints:        массив [0..3] из pchar;
    ButtonTexts:       массив [0..3] из pchar;
    ButtonHints:       массив [0..3] из pchar;
    ShowCancelBtn:     TInt32Bool;
    end;
	```
	- TShowMultiPurposeDlgFunc = procedure (Setup: PMultiPurposeDlgSetup); stdcall;
	```
	(* Отображает настраиваемый многоцелевой диалог и возвращает выбранный идентификатор кнопки (1..4) или -1 для отмены *)
	```
	- function ShowMultiPurposeDlg (Setup: PMultiPurposeDlgSetup): integer; stdcall;
	```
	(* Заменяет текущий обработчик/реализатор многоцелевого диалога. Возвращает старый обработчик, если он есть *)
	```
	- function SetMultiPurposeDlgHandler (NewImpl: TShowMultiPurposeDlgFunc): {n} TShowMultiPurposeDlgFunc; stdcall;
	```
	(* Создает новый экземпляр API плагина для определенного плагина DLL. Передает реальное имя dll с расширением. Возвращает экземпляр плагина или NULL, если плагин уже создан *)
	```
	- function CreatePlugin (Name: pchar) : {On} TPlugin; stdcall;
	```
	(* Устанавливает новый хук по указанному адресу. Возвращает указатель на мост с исходным кодом, если таковой имеется. При желании укажите адрес указателя для записи указателя на примененную структуру патча. Это позволит откатить патч позже. MinCodeSize указывает исходный размер кода, который будет стерт (nopped). В большинстве случаев используйте 0. *)
	```
	- function Hook (Addr: pointer; HandlerFunc: THookHandler; {n} AppliedPatch: ppointer; MinCodeSize, HookType: integer): {n} pointer; stdcall;
	```
	(* Возвращает true, если примененный патч был перезаписан *)
	```
	- function IsPatchOverwritten (AppliedPatch: pointer): TInt32Bool; stdcall;
	```
	(* Возвращает размер примененного патча в байтах (количество перезаписанных байтов) *)
	```
	- function GetAppliedPatchSize (AppliedPatch: pointer): integer; stdcall;
	```
	(* Генерирует случайное значение в указанном диапазоне с дополнительным пользовательским параметром, используемым только в детерминированных генераторах для создания различных выходных данных для последовательности генераций. Например, если вам нужно сгенерировать случайное значение в бою для каждого вражеского стека, вы можете использовать идентификатор стека или переменную цикла для FreeParam. Но для лучшего качества генерации используйте (stackID XOR UNIQUE_ACTION_MASK) и определите константу UNIQUE_ACTION_MASK как уникальное предварительно сгенерированное значение int32. В сетевых сражениях несколько генераций случайных значений с одинаковыми параметрами создают одинаковый выходной сигнал до тех пор, пока не будет выполнено следующее действие. Эта функция позволяет вернуть случайность нескольким генерациям в одно и то же время. *)
	```
	- function RandomRangeWithFreeParam (MinValue, MaxValue, FreeParam: integer): integer; stdcall;
- Добавлена опция "Debug.LogWindowMessagesOpt" в "heroes 3.ini", позволяющая вести журнал сообщений главного окна и их параметров.
- Добавлены следующие переводимые строки в "era.json":
	- 'era.debug.game_saving_exception_warning': отображается при исключении записи сохраненной игры
	- 'era.debug.debug_dump_confirmation': отображается при любой ошибке ERM
	- 'era.incompatible_savegame_version_warning': отображается, если сохранение игры было выполнено на слишком старом движке Era
> [!NOTE]
> Отныне Era всегда запрашивает разрешение на загрузку глобальных скриптов при запуске карты или перезагрузке скриптов, если на карте есть внутренние скрипты. Текст разрешения был изменен с "skip" на "load" по умолчанию. Следующий ключ языка необходимо перевести: 'era.global_scripts_vs_map_scripts_warning'. WoG Option 5 всегда устанавливается на 3 (запрашивать загрузку глобальных скриптов, если на карте есть внутренние скрипты) перед загрузкой любых скриптов, поэтому больше нет необходимости сохранять его в WoG Options. Инструкция UN:P5/# в элементах управления внутренними скриптами карты, принудительно ли автор карты загружает глобальные скрипты или нет.
- Включены обновленные исходные коды для следующих плагинов: "Buttons", "Erm Hooker", "WoG Native Dialogs", "Game Bug Fixes Extended". Спасибо команде baratorch и Hota за предоставление их заголовочных файлов.
- Включены переработанные Delphi и C++ Era SDK (файлы API) в Tools/Era/SDK.
- Включены последние исходные коды Era (Tools/Era/Sources/Era 3.9.16) и исходные коды Virtual File System.
- Восстановлена функциональность чит-кодов WoG в моде Easy Cheats, исправлены опечатки в документации и добавлено отображение размеров выгруженных массивов.
- Обновлен плагин "erm_hooker.era" для отражения изменений в движке Era.
- Обновлен плагин "buttons.era" для отражения изменений в движке Era.
- Обновлен плагин "wog native dialogs.era" для большей толерантности к неподдерживаемым типам изображений для диалогов IF:E.
- Повышена стабильность обработки ресурсов snd/vid (используются хуки splice вместо хуков patch).
- Поддержка файла "load only these scripts.txt" устарела. Она будет удалена в версиях Era 4.X. С этого момента дублирующиеся записи в этом файле игнорируются.
- Обновлен мод "Era Erm Framework" для использования каталога "lib_end" для некоторых скриптов.
> [!IMPORTANT]
> Изменен формат файла сохранения. Добавлена проверка формата. Старые сохранения будут загружаться без данных скриптов/плагинов.
- Удалены следующие функции из era.dll: "CalcHookPatchSize".
- Исправлен сбой в сетевой игре в диалоге сохранения игры: нажатие ПКМ на некоторые элементы диалога приводило к недопустимой попытке обновления ScreenLog без инициализации поля textWidget.
- Исправлено сообщение о неправильной версии ERA.
- Обновлен C++ Era SDK (функция "ConnectEra" теперь принимает до 2 аргументов).

#### WoG:
- обновлён плагин "RMG_CustomizeObjectProperties.era":
	- исправлена некорректное значение ценности объектов при Генерации Случайной Карты:
		- Ящик Пандоры;
		- Тюрьма;
		- Свиток заклинания;
		- Хижина Ведьмы;
		- Палата Ключника;
> [!IMPORTANT]
> 	- Для добавления свойств с помощью ключа "RMG.[mod_folder_name].properties.[index]" теперь требует указывать имя папки мода в нижнем регистре. Например:
> 	```
> 	"RMG.wog.properties.0":"AVSidol0.def 011111111111111111111111111111111111111111111111 100000000000000000000000000000000000000000000000 111111111 011110111 38 0 0 0"
> 	```

#### Game Enhancement Mod:
- исправлена улучшенная подсказка для Университета на ПКМ;
- исправлены горячие клавиши для быстрых действий в бою;

#### ERA Scripts:
- Исправлены ошибки в дальнобойном ответном ударе Ящеров-Воинов;

#### WoG Scripts:
- Метаморф: Исправлено неправильное количество существ при трансформации Метаморфа.

#### Other:
- новый Менеджер Модов (@SyDr) обновлён до версии 0.98.47, а имя исполняемого файла изменилось на "Mod Manager.exe";
- добавлены исходники плагинов от igrik;
- старые и новые исходники плагинов и приложений из папки "Tools\Era\Sources" запакованы в архив для экономии места;


### Версия 2.132

#### Advanced Classes Mod:
- Исправлена невозможность воскрешать полностью убитый стек после применения заклинания М/ГМ Лечения.
- Добавлена проверка идентификатора навыка sec в скрипте наведения курсора

#### Game Enhancement Mod:
- обновлён плагин "GameplayEnhancementsPlugin.era":
	- теперь дополнительное описание объектов не отображается в подсказке
	- теперь подсказки корректно отображаются в мультиплеере для неактивного игрока;
	- добавлены новые объекты для отображения по умолчанию
- исправлена улучшенная подсказка посещённого университета на ПКМ;
- Исправлена подсказка об ожидаемом уроне от стрельбы в бою

#### TrainerX:
- Теперь предоставление возможности летать активному герою перерассчитывает его путь;

#### Other:
Добавлен новый Менеджер Модов (@SyDr)
	- На данный момент запустить новый Менеджер Модов можно по пути "[Папка_с_игрой]/Tools/SD Mod Manager/main.exe"
	- Предложения, Сообщения об ошибках и Благодарности отправляйте в [канал Discord](https://discord.com/channels/665742159307341827/723550276077748357)

### Версия 2.131

#### WoG:
- Обновлён плагин "RMG_CustomizeObjectProperties.era":
	- Добавлена генерация объектов на снегу, которые имеют необходимую графику;
	- При посещении Банка существ теперь пишется его имя и кол-во охраняющих существ;
	- Добавлена возможность отображать расширенные подсказки при посещении Банков Существ. Ключ:
	```
	"RMG.settings.creatureBanks.extendedDlgInformation": bool
	```
	- Добавлена возможность отображать имя подсказки при посещении Банков Существ. Ключ:
	```
	"RMG.settings.creatureBanks.displayName": bool
	```
	- Добавлена возможность установить собственное сообщение при посещении Банков Существ. Ключ:
	```
	"RMG.objectGeneration.[type].[subtype].text.visit": string
	```
	- Добавлена поддержка генерации жилищ существ с 4 существами (тип 20);
- Улучшено описание заклинание "Антимагия";

#### Advanced Classes Mod:
- Исправлена Атака Дыханием
- Добавлен журнал боя для ловушки тележки с боеприпасами.
- Исправлено отображение диалога возврата золота для палатки первой помощи для героя, проигравшего битву.
- Исправлена ошибка: заклинания существ не работали при включенном аметисте.
- Изменена область срабатывания умения "Доблесть". Теперь только нажатие на экран города или здания активирует эту способность.

#### ERA Scripts:
- Городские сокровищницы: Оптимизирован диалог грабежа.

#### WoG Graphics Fix Lite:
- Обновлён до версии 2.20.1

#### WoG Scripts:
- Улучшенные артефакты I: теперь Сапоги Мертвеца дублируются только в том случае, если в рюкзаке владельца нет Сапог Мертвеца.

#### Other:
- прочие исправления и улучшения;


### Версия 2.130

### WoG:
- Обновлён плагин "RMG_CustomizeObjectProperties.era":
	- В диалог настроек объектов генерации добавлена возможность сбросить настройки для каждого объекта по отдельности;
	- В меню создания случайной карты добавлена возможность ввести точное зерно генерации для создания конкретной случайной карты;
	- Исправлен вылет при генерации Хижин провидцев;
	- Исправлен сброс типа ресурсов для Складов Ресурсов на дерево в начале каждой недели;
	- Добавлена поддержка установки объектам возможность посещения с соседней клетки (как для артефактов);

#### Advanced Classes Mod:
- Изменено время выполнения для FU(ACM_DrawActionPlay):P, надеюсь, анимация повреждения будет выглядеть лучше.

#### Game Enhancement Mod:
- обновлён плагин "GameplayEnhancementsPlugin.era":
	- Изменено изображение кнопки в диалоге разрушения постройки в городе
	- Улучшена подсказка об объектах;
- Обновлён диалог настроек мода;
- Добавлена настройка для отключения массового ожидания/защиты для Боевых Машин;

#### ERA Scripts:
- Опыт битвы: теперь скрипт учитывает множитель опыта человека/ИИ, установленный в скриптах или опциях wog;


### Версия 2.129

### WoG:
- Обновлён плагин "RMG_CustomizeObjectProperties.era":
	- "Беседка" теперь отображает стоимость услуг посещения объекта;
	- Исправлен бесконечный звук объектов;


### Версия 2.128

### WoG:
- Обновлён плагин "RMG_CustomizeObjectProperties.era":
	- Исправлена генерация WoG-объектов;


### Версия 2.127

#### Advanced Classes Mod:
- Исправлена ошибка, из-за которой анимации Метеоритного дождя и Имплозии не менялись корректно в битвах с двумя героями.

#### Game Enhancement Mod:
- обновлён плагин "GameplayEnhancementsPlugin.era":
	- Исправлены неровные подсказки по объектам;
- Для специалистов по броне ниже 868-го уровня максимальное снижение физического урона от брони установлено на уровне 4%.

### WoG:
- Обновлён плагин "RMG_CustomizeObjectProperties.era":
	- Добавлена поддержка объекта "Колизей Магов";
	- Добавлена поддержка объекта "Беседка";
	- Теперь вы можете добавить любое количество дополнительных свойств объектов на карту с помощью ключа "RMG.[mod_folder_name].properties.[index]". Обратите внимание, что свойства должны идти упорядоченно (также можно использовать массив свойств);
	- Теперь генерация WoG-объектов работает лишь для тех объектов, работа которых обеспечена соответствующим скриптом ( номер опции прописан в json. Она должна быть включена, чтобы объект он создавался);
	- Теперь настройки диалога сохраняют лишь изменённые данные объектов;
	- Исправлено: хижины провидцев не генерировались;
- Добавлено 2 хижины провидцев для генерации (итого 5);
- Изменены свойства и почвы генерации для некоторых WoG-объектов (больше никаких Снежных Гротов на иных почвах);

#### Other:
- обновлён Sublime Text Editor до версии build 4189;


### Версия 2.126

### WoG:
- добавлены недостающие свойства объекта "Склад Кристаллов";


### Версия 2.125

#### Advanced Classes Mod:
- Исправлена ошибка, из-за которой анимация стека иногда не обновлялась после получения урона от скриптов (например, Магическая Артиллерия).
- Исправлен тип возрождения Феникса, который не срабатывал сразу после урона скриптами.

#### Game Enhancement Mod:
- обновлён плагин "GameplayEnhancementsPlugin.era":
	- Исправлены неровные подсказки по объектам;
	
### WoG:
- Обновлён плагин "RMG_CustomizeObjectProperties.era":
	- Добавлена поддержка объекта "Склад Мифрила" - графика @Grossmaestro;
	- Подправлено описание в диалоге;


### Версия 2.124

### WoG:
## Добавлен новый крупный плагин "RMG_CustomizeObjectProperties.era":
> [!NOTE]
> Генератор Случайный Карт (далее ГСК)
- Данный плагин позволяет:
	- добавлять полностью нативные для Героев 3 Банки Существ с типом объекта "16";
	- изменять любые существующие банки;
	- изменять звуки для посещения и окружения для всех объектов;
   	- генерировать WoG-объекты ГСК (больше никаких замен нужных объектов);
	- добавлять новые объекты в механику игры с полной поддержкой ИИ (Больше никаких "Пирамид"!):
		- уже добавлены "Склады Ресурсов" из HotA;
		- в разработке "Водопой" и "Беседка";
> [!TIP]
> Всё вышеперечисленное делается ТОЛЬКО с помощью JSON-файлов. Больше никаких objects.txt!
> Теперь каждый может добавлять свои объекты

# А теперь самое интересное:
### В меню создания Случайной Карты добавлено 2 новых кнопки:
- "Настройки ГСК" - открывает новый диалог, внутри которого можно (нужно):
	- настроить ЛЮБУЮ генерацию под себя!
	- включить/выключить большинство объекты для ГСК;
	- настроить максимальное количество объектов на карту/зону;
  	- изменить ценность объектов;
  	- изменить базовую стоимость жилищ существ;
	- изменить плотность генерации объектов;
 	- изменить ценность объектов ( позднее попробую поработать и с лимитами зон);
- "Игральные Кости" - перед каждой генерацией создай действительно случайные настройки для всех объектов, что превращает каждую карту в уникальный набор объектов; 

#### Game Enhancement Mod:
- обновлён плагин "GameplayEnhancementsPlugin.era":
	- Добавлена возможность просмотра описания подсказок над объектами на карте приключений при нажатой клавише "Alt";
	- Список объектов и горячую клавишу для работы вы можете изменить в файле "Runtime/gem_AdventureMapHints.ini";
	- Вы можете включить/отключить отображение подсказок через окно настройки GEM;

#### Advanced Classes Mod:
- Добавлено исправление для предотвращения переполнения урона от критического удара (перепроверьте значение MF:D/F перед применением).
- Исправлены описания специалистов по существам (снова).


### Версия 2.123

#### HD-Mod:
- Обновлён до версии 5.5 R29.
- Добавлено множество графических настроек в HD-mod Launcher - попробуйте новые режимы

#### Advanced Classes Mod:
- Огненный маг: новая реализация атаки Огненным шаром огненного мага, чтобы исправить некоторые ошибки (например, не срабатывание после того, как командир выучит Удар по всем направлениям)
- Исправлены некорректные бонусы, отображаемые в описаниях особенностей существ.

#### ERA Scripts:
- Достижения: Исправлен особый эффект достижения Slayer (заставляет врагов пропускать свои ходы в битве), не пропускал неживых существ.
- ReMagic: Исправлено взаимодействие с опцией "Призыв Элементалей" (позволяющей вызывать элементалей на карте приключений). Сфера Бушующего Огня теперь корректно увеличивает количество призванных огненных элементалей.
- Лимит Героев: Исправлен текст подсказки в таверне, когда вы уже достигли лимита героев и пытаетесь нанять нового.
- Зомби-трупоеды: Исправлена ошибка, из-за которой герой не получал опыт за съеденные стаки.
- Исправлено неработающее срабатывание хуков FU(ES_OnAfterMelee) и FU(ES_OnAfterShoot). Это должно решить проблемы некоторых способностей существ, таких как зомби-трупоеды.

#### Game Enhancement Mod:
- Добавлена функция, показывающая статус посещения палатки ключника при наведении курсора или щелчке правой кнопкой мыши по пограничным воротам/стражу прохода.
- Добавлено исправление, предотвращающее попадание ИИ в бесконечный цикл после оживления своих войск.

#### WoG:
- Добавлены пропущенные объекты типа 63 в zaobjects.txt для возможности их генерации с помощью RMG;

#### WoG Scripts:
- Улучшенные боевые машины I/II: Исправлены палатки первой помощи, которые могли снижать здоровье существ до 0 после исцеления.
- Улучшенные монстры: исправлена ошибка со скоростью Дьяволов/Архидьяволов, которая сбрасывалась после переигровки битвы.
- Гарнизоны: восстановлены заклинания мин/зыбучих песков в гарнизонах (были удалены, так как по какой-то причине наносили урон охране в гарнизонах).
- Зеркало Пути Домой: отключена кабальная плата за использование;


### Версия 2.122

#### Advanced Classes Mod:
- Исправлена возможность выбора класса в бою
- Исправлены бонусы ACM от событий Разведки, которые не были переведены.
- Добавлен переключатель для скрипта "Переключение действий", позволяющий включать/выключать его внешними скриптами.

#### ERA Scripts:
- Достижения: Исправлена ошибка erm при посещении хижины ведьмы без навыков.
- Ответный выстрел ящеров-воинов: Теперь они наносят ответный удар только одним выстрелом, даже если могут выстрелить дважды при обычных атаках (та же логика, что и у ответных ударов крестоносцев).

#### Game Enhancement Mod:
- Исправлена ошибка Исследования Заклинаний, из-за которой не работала возможность исследования должным образом, когда количество заклинаний на уровне меньше обычного (происходит, когда большинство заклинаний запрещено в редакторе карт или скриптах)
- Добавлено исправление для проверки иммунитета к заклинаниям, добавленных опытом существ.


### Версия 2.121

#### HD-Mod:
- Обновлён до версии 5.5 R19

#### ERA Scripts:
- Новая Вуаь тьмы: Исправлено искажение текста в 
- Воинская обязанность: опция адаптирована, чтобы её можно было настраивать внешними скриптами.

#### Game Enhancement Mod:
- Исправлено нажатие F для каста, который не работал для Сказочных драконов, когда герой-владелец не мог кастовать.
- Исправлен сброс опыта существ после переигровки быстрой битвы

#### WoG Graphics Fix Lite:
- Обновлён до версии 2.19.5

#### WoG Scripts:
- Расширенные специализации героев: специалист по вторичным навыкам со способностью кастовать заклинание в начале боя больше не требует книги заклинаний для активации.
- Живые свитки: Живые свитки теперь работают для героя и без книги заклинаний.
- Засады бандитов: Исправлено вмешательство опции достижений и внешних скриптов.


### Версия 2.120

#### Advanced Difficulties Mod:
- добавлена совместимость между ADM и MNM. Теперь, когда опция "Рост существ за пределы 4т" активна, MNM будет показывать правильный размер стека в тексте подсказки и диалоговом изображении

#### Game Enhancement Mod:
- Исправление опыта существ у отрядов при переигровке битв: теперь используется более надежный способ получения указателей армии

#### WoG Scripts:
- Улучшения за Мифрил: улучшена совместимость между Mithril Enhancement (функция Monolith) и функцией GEM Monolith Locator.
- Изумрудная Башня: количество существ для жертвоприношения сделано модифицируемым


### Версия 2.119

#### Game Enhancement Mod:
- Исправлены неверные константы;

#### ERA Scripts:
- Исправлен скрипт "Захват мельниц и садов";


### Версия 2.118

>[!WARNING]
> Не обновляйте HD-mod, так как его новая версия конфликтует с некоторыми плагинами;

#### Game Enhancement Mod:
- Исправлена ошибка, из-за которой в некоторых сценариях при воспроизведении боя возникали неполадки в данных об опыте существ (влияла на опцию «Метаморф»).

#### WoG Scripts:
- Death Chamber: Now the hostile spell casting before action is only triggered when it's a monster action (Walk/Defend/Walk and Attack/Shoot).

#### Other:
- прочие мелкие исправления;


### Версия 2.117

>[!NOTE]
> Мод 16 2-Ways Monoliths удален из сборки из-за отсутствия стабильности;

#### Advanced Difficulties Mod:
- Исправлены настройки банков существ.

#### Advanced Classes Mod:
- Теперь опция "Магические грибы" отключена, так как она конфликтует с несколькими функциями ACM
- Убрана "Антимагия" из случайного заклинания, выдаваемого при использовании ГМ Воскрешения, так как она препятствует дальнейшему использованию Воскрешения.
- Исправлены способности нейтральных командиров, не адаптированные ACM.
- Исправлено улучшенное Лечение, которое прерывает возможность использования Воскрешения на убитых юнитах (из-за изменения их ОЗ).

#### ERA Scripts:
- Третий класс: Теперь эта опция частично совместима с ACM. Включение этой опции и ACM позволяет выбирать из 3 навыков вместо 2 при повышении уровня героя.

#### Game Enhancement Mod:
- Панель здоровья: добавлена возможность установить панель здоровья под меткой номера существа
- Исправлено странное взаимодействие при наличии дубликатов частей комбинации
- Исправлен текст плагинов GEM
- Исправлено определение версии игры с помощью скриптов;

#### WoG Scripts:
- Новые поля сражений: исправлены новые поля сражений, которые иногда не включались.
- Рост популяции нейтральных городов и банков существ: исправлен ежемесячный сброс охраны Банков Существ
- Неделя монстров: скрипт переписан и теперь с ним можно играть
- Рыболовный колодец: теперь событие "Тоннель" будет активироваться только на случайных картах (так как это потенциально нарушает совместимость с некоторыми пользовательскими картами)
- Улучшения мифрила: исправлена ошибка !!MN:R (не используйте здесь краткую форму координат, например MN4, вместо этого используйте MNv4/v5/v6)
- Артиллерия: исправлена сторона цели автоматического заклинания при применении артефактами после предотвращающего выстрела;

#### WoG:
- Исправлен плагин поддержки нескольких языков.


### Версия 2.116

#### Advanced Difficulties Mod:
- отформатированы некоторые текстовые строки в файле json
- Командиры в банках существ больше не будут получать способности и немного уменьшат свое масштабирование в начале игры
- удалены лишние шрифты

#### Advanced Classes Mod:
- исправлено отображение текста в диалогах

#### Game Enhancement Mod:
- реорганизация тексты
- добавлена полоска здоровья в бою
- добавлена прокрутка карты на СКМ и ПКМ
- добавлено удаление героев города
- добавлено подтверждение команд с помощью пробела в диалогах
- удалено "creature stats texts.era"
- исправлена потеря строк опыта при переигровке боя

#### WoG Scripts:
- Метаморфы: Исправлена возможность трансформации при недостаточном пространстве.
- Воссозданная функция GetRandomMonster (используется в Неделе Монстров/Метаморфах)
- добавлена поддержка gosolo для скрипта разведки


### Версия 2.115

#### WOG:
- Удалено отладочное сообщение, возникающие при открытии диалогов


### Версия 2.114

#### Game Enhancement Mod:
- Исправлена путаница в статистике существ с опытом стека после повтора битвы, когда стек был убит флагом Summoned. Это исправило статистику Metamorphs и, возможно, некоторые сторонние скрипты.

#### WOG:
- переписаны некоторые плагины для повышения стабильности игры

#### WoG Graphics Fix Lite:
- Fixed WM II catapult small icon

#### WoG Scripts:
- добавлена поддержка плагина генерации ВоГ-объектов на случайных картах (плагин пока что доступен в VIP-канале)
- Хижины командиров ведьм: добавлена возможность отказаться от предложенного навыка

#### Other:
- добавлен исходный код ERA
- обновлены и добавлены заголовочники для создания плагинов для с использованием ERA API


### Версия 2.113

#### Advanced Classes Mod:
- исправлена ошибка ERM во время лечения в бою 

#### ERA Scripts:
- Удалена опция "Засады Бандитов", так как он очень похожа на "Атаку воров".
- Удалены erm-файлы с неиспользуемыми функциями

#### WoG Scripts:
- теперь срабатывает только со второго дня (так же, как ежедневные события из оригинальной игры)
	- Хозява жизни
	- герои создают магический ландшафт каждый день
	- улучшенные монстры героя 7-го уровня становятся монстрами 8-го уровня


### Версия 2.112

#### Advanced Classes Mod:
- Теперь Огненные Маги и союзники будут по-прежнему невосприимчивы к собственному Огненному Шару с представленной Сферой Уязвимости.
- Теперь Дипломатия не может привлекать существ, которые не могут быть созданы на карте (необходимо заранее установить MA:H=0).

#### Game Enhancement Mod:
- hotfix


### Версия 2.111

#### Advanced Classes Mod:
- В многопользовательских играх текст способностей из наборов "Усадьба"/"Природный Целитель"/"Тайный" не отображается для удаленного игрока.
- Исправлена проблема в многопользовательской игре, когда во время боя можно было выбрать заклинание вражеского командира (классы Архимаг/Хранитель), что приводило к рассинхронизации.
- Теперь немного сложнее получить высокие значения характеристик для заклинаний "Молитва" и "Благословение".
- Различные исправления для многопользовательских игр.
- Заклинание "Рассеивание" теперь принадлежит школе Воздуха, а "Маскировка" перемещено в школу Воды.
- Исправлено сообщение о бонусе набора "Разведка" перед боем.
- Изменено описание артефакта "Мощь Отца Драконов".
- Знак Мужества больше не дает иммунитет к ментальным заклинаниям для всех войск.
- Заклинания класса командира "Хранитель" теперь правильно масштабируются в зависимости от модификатора заклинания.
- Все заклинания, накладываемые командирами, теперь имеют 50% шанс дать +1 к числу убитых.
- Исправлена совместимость с ERA 3.9.15 (хук "Поместье").
- Отключена Экономика (опция ES), так как она вызывает проблемы с множественным текстом описания и совместимостью специализаций.
- Оптимизированы триггеры HL (учтите, что они выполняются для героев с высоким уровнем по умолчанию. Здесь мы используем i^acm_isGameStarted^, чтобы пропустить процесс HL до начала игры).
- Исправлен текст специалиста Мутаре.
- Немного уменьшено масштабирование урона заклинания "Огненный Щит".
- Исправлена ошибка с нулевым перемещением командира класса "Охотник".
- Предотвращено уменьшение количества существ в отряде лечащего существа, если у него есть BM:B>BM:N.
- Щит Огра имеет небольшой шанс блокировать 50% урона.
- Деревянный щит Гнома дает бонус к жизни войскам 1 и 2 уровней.
- Щит Гнолла накладывает эффект "Зеркало магии" в первом раунде боя.
- Масштабирование артефактов командира уменьшено вдвое.
- Артефакты командира больше не теряют бонусы при снятии.
- Навык атаки командира (от Базового до Грандмастера) теперь масштабируется от 5 до 25, как и защита.

#### ERA Scripts:
- Исправлено зависание игры при отображении достижений
- добавлена совместимость с модом WoG Graphics Fix

#### Game Enhancement Mod:
- Обновление главного плагина до версии 1.7:
	- Изменён курсор при наведении на номера версий в главном меню;
	- Добавлена возможность открыть список изменений игровой сборки (клик на установленной версии сборки)
	- Добавлена возможность открыть список изменений движка ERA (клик на версии ERA)
	- Напоминаю о возможности перейти на веб-сайт с последней версией (клик на последней версии сборки)
	
#### WoG Scripts:
- Улучшение замка: Исправлены данные о приросте, отображаемые в диалоговом окне, вызываемом правой кнопкой мыши по значкам существ в городах.
- Случайный герой: Исправлен случайный герой, который становился доступным для всех игроков после битвы (если он был забанен на карте).


### Версия 2.110

#### Advanced Classes Mod:
- Отключено удаление теоретического боя ИИ против ИИ
- Теперь сила Мастерской/Грандмастерской Некромантии составляет 20%/25% (было 17%/20%)
- Альтернативная Некромантия:
	- Теперь выбор существа для подъема для альтернативной некромантии будет сбрасываться, когда герой возрождается в тавернах.
	- Теперь сила Некромантии для подъема пользовательского существа рассчитывается на основе текущих значений:
		- Ходячие мертвецы: 80% от исходного значения
		- Призраки: 55% от исходного значения
		- Вампиры: 30% от исходного значения
		- Личи: 25% от исходного значения
		- Черные Рыцари: 15% от исходного значения

#### ERA Scripts:
- Смертные Герои: исправлена ошибка, из-за которой значок специальности иногда не сбрасывался, когда герой получал новую специальность.

#### Game Enhancement Mod:
- добавлен выбор шрифта добавляемых текстовых элементов главного меню;
- добавлен вопрос перед открытием сайта с последней версией сборки на GitHub;

#### Other:
- Добавлен вьетнамский язык в диалог выбора языка;
- Некоторые моды получили иконки;
- Добавлены кампании Heroes Chronicles;


### Версия 2.109

## HD Mod:
- По умолчанию теперь активированы следующие твики:
	- `Fix.Crit.MapsOver5000` - исправляет вылет при огромном количестве карт;
	
#### ERA Scripts:
- Смертные Герои: исправлена опечатка;

#### Game Enhancement Mod:
- Добавлено исправление некорректного расчёта бонуса игнорирования защиты;


### Версия 2.108

#### ERA Scripts:
- Смертные Герои: исправлена опечатка;


### Версия 2.107

## HD Mod:
- По умолчанию теперь активированы следующие твики:
	- `Misc.TournamentSaver` - ежедневно создаёт уникальные сохранения для каждой игры;
	- `Misc.RenameRandMap` - создаёт уникальное имя для каждой карты, созданной Генератором Случайных Карт;
	- `UI.Ext.TownMgr.AvailableInsteadGrowth` - В окне города отображает количество доступных для найма существ, а не прирост;
	- `UI.Tavern.InviteHero` - позволяет выбрать следующего нанимаемого героя после покупки текущего;
	- `UI.Ext.AdvMgr` - поддерживает расширенную подсказку в строке состояния карты приключений;

#### Advanced Classes Mod:
- Альтернативная некромантия теперь активируется щелчком левой кнопки мыши по значку некромантии (ранее — щелчком правой кнопкой мыши).

#### ERA ERM Framework:
- добавлен адрес массива стуктур Командиров;
- добавлен адрес SWAP_MANAGER (Менеджер встречи героев);

#### ERA Scripts:
- Городские сокровища: исправлена ошибка, из-за которой иногда было невозможно обокрасть Красного игрока.
- Ночная разведка: оптимизирован диалог для проверки принадлежащих героям ассасинов.
	- Смертные герои:
	- Предотвращение генерации одинаковых специальностей при спаме битв в одном и том же месте.
	- Сброс NPC теперь осуществляется функцией WoG, более высокая совместимость с опцией "Усиленные командиры"

#### TrainerX:
- Исправлена невозможность изменить уровень героев, не принадлежащих текущему игроку.

### WoG Scripts:
- Исправлено описание вогификации в меню вог-опций;
- ## Опция "Неделя монстров" временно отключена;
- Стандартизировано взаимодействие вторичных навыков (Поместье II, Разведка I/III). Теперь они активируются щелчком левой кнопкой мыши по иконкам вторичных навыков на экране героя. Их нельзя активировать, если это не ход игрока/герой не принадлежит игроку.
- При включении Разведки I и Разведки III диалог настройки Разведки I активировался щелчком правой кнопкой мыши по иконке Разведки. (так как диалог левой кнопки мыши занят Разведкой III).
- Освобождены z250-z265, z770-z786 из скрипта Разведка III. Теперь их можно использовать свободно.
- Разведка III: Базовая разведка больше не может красть ресурсы и заклинания (для использования необходимо перейти на продвинутый уровень). Исправлено неправильное отображение основных навыков героя в городе, в который проникли.
- Артиллерия: ограничено количество баллист при превентивном выстреле до 1;
- Усиленные Командиры: небольшая оптимизация кода, исправление сброса заклинания Астрального Духа;

#### Other:
- Добавлен хук (xxx_OnResetHero) для работы с переменными героя (или глобальными переменными героя). Это должно помочь сбросить выбор вторичных навыков/артефактов, когда герой уволен/побежден и возрождается в тавернах.
- добавлены пропущенные данные кампаний Клинка Армагеддона


### Версия 2.106

#### Advanced Classes Mod:
- Топор Кентавра теперь дает +5% к шансу физического крита
- Трейнер заклинаний призыва теперь дает процентный бонус (слабее в начале игры, сильнее в конце)
- Шлем Единорога, Подвода с Боеприпасами ( и её улучшения) обеспечивают большее восстановление очков заклинаний после боя
- Восполнение очков маны (улучшение Подводы с Боеприпасами) теперь требует вторичный навык "Искусство Войны" (Тактика) вместо Обучения (делает его более доступным для Воинов, так как им может быть сложно иметь достаточно Маны). Улучшение "Overheal" теперь требует навык "Обучение" вместо Искусства Войны (Тактики).
- Дубина Короля Огров: исправлена неработающая способность оглушения
- Способность "Пацифист" больше не будет уменьшать урон от низкоуровневых юнитов на 50% (спасибо Diozia)
- Исправлена некорректная работа Дипломатии
- Перебалансированы эффекты способности "Калека". Минимальная скорость существ составляет 3 вместо 2 (те же характеристики, что и у крестьян).

#### Advanced Difficulties Mod:
- Исправлено: дополнительные способности не будут накапливаться при переигровки битв (спасибо TheInvisible1966)

#### ERA Scripts:
- Смертные Герои: Теперь специализация "Аура Проклятия" больше не дает вам скрытую специализацию заклинания. Улучшен текст журнала битвы: теперь он более понятен.
- Удалены лишние функции;

#### Game Enhancement Mod:
- Добавлено взаимодействие с Водоворотом Маны в стиле HotA: Водоворот Маны теперь активируется вручную и может быть использован только гостевым героем. Кроме того, невозможно использовать Водоворот Маны в городах союзников.

#### WoG Graphics Fix Lite:
- Обновление мода до версии 2.18.0;

#### WoG Scripts:
- Пещера приключений: теперь способности, полученные от отшельников, можно использовать в сетевых битвах.

#### Other:
- исправления некоторых файлов локализации;


### Версия 2.105

#### ERA Scripts:
- улучшены специалисты по существам: изменен хук и оптимизирован скрипт;
- Скелеты с артефактами: убрана анимация при быстрой битве;

#### WoG Scripts:
- Артиллерия: исправлен вылет при атаке городов с башнями;


### Версия 2.104

#### Advanced Classes Mod:
- Исправлено отображение сообщения о грабеже, когда город игрока-человека захвачен ИИ.

#### ERA ERM Framework:
- Добавлена инициализация боевых переменных в триггере OnSetupBattlefield;

#### ERA Scripts:
- Теперь опция "артефакты рюкзака" полностью совместима с ACM (снова). Включение этой опции с помощью ACM позволяет артефактам очков движения давать очки передвижения из рюкзака.

#### Game Enhancement Mod:
- Отключение кнопок и диалоги быстрого боя на карте обучения (поскольку в обучении отключена вся функция быстрого боя).

#### WoG Scripts:
- В скрипт "Хозяева Жизни" добавлена функция, позволяющая внешним скриптам управлять существами.
- Рефакторинг скриптов бонусов для нейтральных юнитов, повышение производительности и устранение потенциальной проблемы пересечения переменных.

### Версия 2.103

#### Advanced Classes Mod:
- Исправлена возможность колдовать "Забывчивость" на тех, кто не стреляет.

#### WoG:
- Исправлен вылет при попытке создания случайных карт;
- Добавлены картинки для кампаний "Хроник";


### Версия 2.102

#### ERA:
	- ВНИМАНИЕ! примеры использования всех нововведений находятся в файле "/Help/Era manual/era iii Changelog.txt";

- ## обновление ядра ERA.dll до версии 3.9.15:
- Обновлен плагин erm_hooker.era до версии 3.0:
 — Переключен на современный API исправлений из era.dll.
 - Реализована защита от перекрытия патчей.
 - Реализована защита от восстановления патчей, если пропатченный код был изменен сторонним кодом.
 - Улучшен код исправления моста.
 - Добавлен отчет о версии (ПКМ по кредитам в меню игры).
 - Файл отчета об исправлениях (Debug/Era/ermooks.txt) теперь использует удобочитаемые имена функций ERM вместо числовых идентификаторов.
 - Добавлена поддержка библиотек сценариев ERM. Скрипты, расположенные в каталоге Data/s/lib, считаются скриптами библиотеки. Они загружаются перед другими глобальными скриптами и перед всеми скриптами карты (как внутренними, так и внешними). Такие скрипты необходимо грамотно писать, использовать только именованные переменные и функции с префиксами. Они не должны влиять на игровой процесс, интерфейс или другие скрипты. Их следует рассматривать как вызываемую коллекцию функций вместе со связанными константами и структурами данных.
- Скрипты Era Erm Framework перемещены в "Data/s/lib" и теперь могут использоваться в картах, даже в картах, отключив глобальные сценарии ERM.
- Исправлена команда "DL:H". Любая строка принимается как подсказка. Подсказка копируется во внутреннюю папку диалога и автоматически освобождается при закрытии диалога. Больше нет необходимости использовать глобальные z-переменные для пользовательских подсказок диалога. Подсказки больше не интерполируются во время показа.
- Изменена команда "IF:L", позволяющая использовать любую строку в качестве аргумента и автоматически экранировать символ "%". Раньше строки с "%" приводили к некорректным результатам или даже к сбоям.
- Изменены команды "HE:B0", "HE:B1", "HE:B3", чтобы использовать любую строку в качестве аргумента.
- Переписаны функции WoG "ApplyString" и "NewMesMan", позволяющие использовать любую строку в нескольких командах ERM (CA, LE, GE и т. д.):
  - Отключен синтаксис установки сообщения о событии на сообщение о событии с заданным идентификатором (например, "GE:M30" для события с идентификатором 30).
  - Устаревший синтаксис использования -1 вместо пустой строки.
- Расширенный синтаксис SN:K(str)/(ind)/[?](strchar или char code). Если результатом является целочисленная переменная, вместо нее возвращается символьный код.
- Расширение команды "VR:F  4-м параметром:
	- Если указано (defaultValue) и переменная не соответствует диапазону (minValue)..(maxValue), ей будет присвоено значение (defaultValue):
	```
	!!VR(intVar):F(minValue)/(maxValue)/(showErrors)/(defaultValue);
	```
- Повышена стабильность выполнения динамических команд ERM с использованием API ExecErmCmd. Добавлена поддержка всех переменных ERM 2 в параметрах команды.
- Расширен буфер быстрой памяти ERM для строковых литералов и строковых аргументов в командах и триггерах ERM с 1 МБ до 3 МБ.
- Добавлена возможность увеличить размер буфера для скомпилированных скриптов erm с помощью настройки heroes3.ini. Значение по умолчанию — 128 МБ. Для одной команды ERM требуется ~0,5 КБ:
  - CompiledErmBufSize = 134217728; максимальный размер буфера для скомпилированных erm-скриптов (не влияет на динамическую компиляцию на лету с использованием PersistErmCmd или ExecErmCmd)
- Отключен трекинг ERM для кода обработки мыши и клавиатуры Era Erm Framework.
- Улучшено форматирование отчета об отслеживании ERM.
- Добавлено новое событие OnBeforeLoadGame для плагинов. Это происходит сразу после выхода из старой игры и перед загрузкой новой игры.
- В файл heroes3.ini добавлена новая опция "Debug.CopySavegameOnCrash". Эта опция включена по умолчанию и включает копирование последнего использованного сохранения игры в каталог отладки при сбое, что может быть полезно для отладки вылетов/ошибок.
- Несколько сообщений из кода перенесены в era.json для дальнейшей локализации:
	- era.no_memory_for_erm_optimization;
	- era.game_crash_message;
- Переработаны и обновлены файлы Era SDK в "Tools/Era/SDK". Для C++ используйте "era.h" и "era.cpp". Для Delphi используйте "era.pas".

- В Era Erm Framework добавлены следующие функции:
    - ```
        !?FU(Interpolate);
        ; Interpolates ERM variables inside given string (%v1, etc). Can be used for nested translation strings like %T(...) is json.
        !#VA(strPtr:x);    Source string.
        !#VA(resultPtr:x); OUT. Result string.
    
        Example:
    
        !!VRi^edu_age^:S33;
        !!VRs^edu_name^:S^Xeon^;
        !!VR(templateStr:z):S^%%s(edu_name) is %%i(edu_age) years old^;
        !!IF:M(templateStr); displays "%s(edu_name) is %i(edu_age) years old"
        !!FU(Interpolate):P(templateStr)/?(interpolatedStr:z);
        !!IF:M(interpolatedStr); displays "Xeon is 33 years old"
        ```
    - ```
        !?FU(Trim);
        ; Trims #0..#32 characters (space and control characters) from both sides of the string.
        !#VA(strPtr:x);    Source string.
        !#VA(resultPtr:x); OUT. Result string.

        Example:

        !!VR(text:z):S^    Hello World    ^;
        !!FU(Trim):P(text)/?(text);
        !!IF:M^%(text)^; displays "Hello World" without leading and trailing spaces
        ```
    - ```
        !?FU(StrPos);
        ; Finds the first occurance of needle string in the haystack string. Returns offset from string start or -1 for faulure
        !#VA(haystackPtr:x); String to search in
        !#VA(needlePtr:x);   String to seacrh for
        !#VA(result:x);      Result offset in the haystack string or -1.
        !#VA(offset:x);      Zero-based offset in haystack string to start search from. Default: 0.

        Example:

        !!VR(text:z):S^Hello World^;
        !!FU(StrPos):P(text)/^World^/?(substrPos:y);
        !!IF:M^%(substrPos)^; displays "6"
        ```
    - ```
        !?FU(StrReplace);
        ; Replaces all occurencies of Pattern string in the Source string with Replacement string. Returns final string.
        ; Can be used inside triggers only.
        !#VA(sourcePtr:x);      Original string to perform replacements in
        !#VA(patternPtr:x);     What string to replace
        !#VA(replacementPtr:x); Replacement string
        !#VA(result:x);         Result string index

        Example:
    
        !!VR(text:z):S^You should cast the spell. Spell casting increases your intelligence^;
        !!FU(StrReplace):P(text)/^cast^/^learn^/?(text);
        !!IF:M^%(text)^; You should learn the spell. Spell learning increases your intelligence
        ```
- В Era Erm Framework добавлены следующие константы:
	- CHAT_EVENT_TYPE_XXX для подтипа события "OnChat"
	- CHAT_EVENT_RESULT_XXX для результата события "OnChat"
- В era.dll добавлены следующие экспортированные функции:

  (* Компилирует одну команду ERM без префикса !! и условий и сохраняет скомпилированный код в постоянной памяти.
     Возвращает ненулевой непрозрачный указатель в случае успеха и ноль в случае неудачи. Завершающая точка с запятой необязательна *)
  function PersistErmCmd (CmdStr: pchar): {n} pointer; stdcall;

  (* Выполняет ранее скомпилированную и сохраненную команду ERM. Для компиляции используйте PersistErmCmd API *)
  procedure ExecPersistedErmCmd (PersistedCmd: pointer); stdcall;

  (* Переводит заданную строку. Возвращает статический адрес преобразованной строки, который никогда не будет освобожден *)
  function trStatic (const Key: pchar): pchar; stdcall;

  (* Преобразует заданную строку. Передает параметры как пары (ключ, значение). Возвращает временный адрес строки, который необходимо немедленно скопировать в безопасное место *)
  function trTemp (const Key: pchar; Params: pointer to array of pchar; LastParamIndex: integer): pchar; stdcall;

  (* Возвращает удобочитаемую строку для идентификатора события ERM. Обычно это удобочитаемое имя триггера ERM или имя функции ERM.
     Вызывающий ДОЛЖЕН освободить возвращенный блок памяти, используя MemFree из era.dll *)
  function GetTriggerReadableName (EventId: integer): {O} pchar; stdcall;

  (* Устанавливает новый хук по указанному адресу. Возвращает указатель на мост с исходным кодом. При необходимости укажите адрес указателя, на который будет записан указатель структуры примененного патча.
     Это позволит позже откатить патч.
     Функция-обработчик должна использовать соглашение stdcall. Он получает указатель контекста ловушки и должен возвращать ненулевое значение, чтобы выполнить перезаписанный код. *)
  function HookCode (Addr: pointer; HandlerFunc: THookHandler; {n} AppliedPatch: ppointer): pointer; stdcall;

  type
    PHookContext = ^THookContext;
    THookContext = packed record
      EDI, ESI, EBP, ESP, EBX, EDX, ECX, EAX: integer;
      RetAddr:                                pointer;
    end;

    THookHandler = function (Context: PHookContext): LONGBOOL; stdcall;


  (* Рассчитывает количество байтов, которые будут перезаписаны при размещении крючка *)
  function CalcHookPatchSize (Addr: pointer): integer; stdcall;

  (*Патч откатится и внутренняя память и освободится. Больше не используйте*)
  procedure RollbackAppliedPatch ({O} AppliedPatch: pointer); stdcall;

  (* Освобождает структуру примененного патча. Используйте его, если вы больше не планируете откатывать его *)
  procedure FreeAppliedPatch ({O} AppliedPatch: pointer); stdcall;

- Изменены некоторые экспортированные сигнатуры функций. Многие из них теперь используют тип TInt32Bool (32 бита 0 или 1) вместо логического значения для лучшей совместимости с ERM:

      type
        TIsCommanderIdFunc       = function (MonId: integer): TInt32Bool stdcall;
        TIsElixirOfLifeStackFunc = function (Stack: Heroes.PBattleStack): TInt32Bool stdcall;
    
      function IsCommanderId (MonId: integer): TInt32Bool; stdcall;
      function SetIsCommanderIdFunc (NewImpl: TIsCommanderIdFunc): {n} TIsCommanderIdFunc; stdcall;
      function IsElixirOfLifeStack (Stack: Heroes.PBattleStack): TInt32Bool; stdcall;
      function SetIsElixirOfLifeStackFunc (NewImpl: TIsElixirOfLifeStackFunc): {n} TIsElixirOfLifeStackFunc; stdcall;
    
      (* Returns 32-character unique key for current game process. The ID will be unique between multiple game runs. *)
      procedure GetProcessGuid: static_pchar; stdcall;

- Повышена производительность функции "Substr" из Era Erm Framework.
- Небезопасные хуки Era с указанными вручную размерами хуков заменены на полностью автоматические хуки с расчетом длины хука с использованием встроенного механизма дизассемблера.
- Исправлена ошибка: события "OnWinGame" и "OnLoseGame" не выполнялись после "OnGameLeave", поскольку к этому моменту движок ERM был отключен. Теперь "OnWinGame" и "OnLoseGame" происходят непосредственно перед "OnGameLeave".
- Исправлена ошибка ERM. При доступе к элементу локального массива по индексу переменной отсутствовала поддержка отложенных вычислений. Такие конструкции, как "!!if&v1<>v1/(array[hugeValueVar])", используются для создания предупреждений во время выполнения. На данный момент индекс недопустимого элемента изменен на 0, что приводит к ошибке времени выполнения только в случае реального доступа к элементу.
- Исправлена ошибка в функции IsCommanderId, приводившая к вылету.
- Исправлена ошибка в игре: ввод текста в строке чата приводил к фантомному нажатию кнопки мыши в чате.
- Исправлен сбой, возникающий при отключении опции "Debug.TrackErm". Ошибка появилась в версии 3.9.14.
- Исправлена ошибка: контекст памяти ERM терялся в исключениях из-за новой реализации быстрого выхода в главное меню.
- Исправлено полное обнаружение битвы ИИ в WoG. Таймер автозакрытия диалога больше не сравнивается с 0. Чит "gosolo" снова работает в боях без ошибок ERM.
- Устаревшие экспортированные функции "ApiHook" и "Hook". "Hook" отобразит сообщение об ошибке, а ApiHook сохраняется только для устаревших версий. Вместо этого используйте HookCode или API patcher_x86 напрямую.
- Исправлена старая ошибка обработки событий. Запуск события ERM с отключенным ERM также привел к тому, что глобальное событие не было создано. Например, Era и плагины не могли обработать событие OnSavegameRead, если ERM был отключен в момент загрузки сохранения игры.

#### Advanced Classes Mod:
- Теперь иммунитет к заклинаниям больше не действует на собственные войска.
- исправлено самоисцеление палатки первой помощи при щелчке правой кнопкой мыши в бою.
- Исправлены хуки ACM Before Attack/After Attack.
- Исправлено отсутствие предоставления позиции в отряде для подсказок о боевых машинах.
- Исправлен Свиток призыва, не работавший при экипировке более 1 свитка;
- Исправлен Огненный Щит:
  1. Теперь мы проверяем, был ли целевой стек применен героем "Огненный щит", вместо того, чтобы проверять, применил ли герой "Огненный щит" к какому-либо из стека, чтобы определить, следует ли призвать огненного элементаля.
  2. Удалены все использование BG в MF1 для Fire Shield, избегая проблем с совместимостью.
  3. исправлен расчет урона Огненного Щита.

- Способность "Блокировать" у Торосара теперь ограничена 100% вероятностью/95% блокировкой урона.
- Исправлены описания специалистов Командира.
- Предотвращено уменьшение количества лечимых существ, если у него есть BM:B>BM:N.
- Исправлена ошибка, из-за которой Сапоги Противодействия не обновляли экран после получения очков движения.
- исправлен текст специалиста Мутаре
- немного уменьшено масштабирование урона от Огненного щита.
- исправлена ошибка с нулевым движением командира класса Охотник.
- Знак отваги больше не дает иммунитет к разуму.
- Мощь Отца Драконов - изменено описание, чтобы показать, что она не защищает от "Снятия Заклинаний".
- Исправлен счетчик убийств командира при переигровке боя.
- Добавлена подсказка в журнал боя для естественного сопротивления (поскольку многие игроки сочли эту способность запутанной)
- Заклинания командирского класса "Страж" теперь имеют правильное масштабирование в зависимости от модификатора заклинания.
- все заклинания, произнесенные командирами, теперь имеют 50% шанс дать +1 к количеству убийств.

#### Advanced Difficulties Mod:
- исправление неправильного расчета боевой награды с настройками банков существ (спасибо Maximo)
- Настройки сложности банков существ немного уменьшили бонус ОЗ командира в неделю на более низких уровнях сложности.
- Исправлена возможность получения боевой награды при убийстве атакующего героя.
- Исправлена возможность давать ИИ опыт, если этого не должно быть (достижение максимального уровня или уровень 6424).

#### Easy Cheats:
- Выпущен новый мод "Easy Cheats" с действительно простыми для ввода и запоминания читами и встроенной консолью ERM. Для получения подробной информации введите "help" в чате (Не забудьте включить его в Менеджере Модов).

#### ERA Scripts:
- Халфинги-Уклонисты: исправлен диапазон урона, от которого нужно уклоняться.
- Батраки:
  - Перемещено положение кнопки "Пеоны" на 5 пикселей вправо, чтобы не закрывать число доходов.
  - Теперь можно отправлять на "работу" войска героя-посетителя, если в гарнизоне нет войска
- Банк Лепрекона: добавлено обновление экрана после заёма в банке.
- Ночная разведка: исправлено изображение Ассасина в диалоге.

#### Game Enhancement Mod:
- Хижины Провидцев: части комбо-артефактов больше не будут выбраны в качестве квестового предмета в Хижинах Провидцев.
- Исправлено отсутствие срабатывания условия победы после захвата всех 7 башен Грифона в сценарии "Да здравствует королева" — сценарий "Утес Грифона".
- Исправлен вылет в бою без лодки на море - возникает из-за отсутствия фона поля боя, вызванного событиями на пользовательских картах, когда герой движется по морю с помощью полета/по воде.
- Исправлена проходимость после посещения тюрем с плагином "game bug fixes extended.dll".

#### HD mod:
- Обновлен до версии 5.5 R6;

#### TrainerX:
- Для работы TrainerX требуется ERA 3.9.15.
- Теперь TrainerX можно использовать на любой карте, включая карты Valery, предотвращающие WoGификации.
- Добавлен Ctrl+ЛКМ по портрету героя в главном интерфейсе трейнера, чтобы центрировать камеру по местоположению героя.

#### WoG Scripts:
- Исправлена ошибка при нажатии на сумму боевого духа при активном моде 10SSkills;
- Нейтральный опыт стека: исправлено взаимодействие с опцией опыта стека. Можно включить опыт нейтрального стека, не включая опыт другого стека.
- Метаморфы: исправлена неверные параметры метаморфа после того, как он трансформировался и получил опыт.
- Улучшения за Мифрил: исправлен эффект улучшения шахт, который длится всю игру (согласно описанию должно составлять 1 неделю)
- Небольшая настройка Изумрудной Башни (не менять боевую ценность при улучшении)

#### Other:
- Несколько небольших корректировок скриптов.
- В список objects.txt добавлены существа-командиры для поддержки их размещения на карте;
- небольшая реорганизация файлов;
- добавлены следующие шаблоны для создания случайных карт в набор hd mod:
	- 8xm8a;
	- 8xm8;
	- 13th Region;
	- Battle Arena;
	- Blood Star;
	- Great Sands;
	- Magic of Decateron;
	- Pentagram;
	- Penteract;
	- Tesseract;


### Версия 2.101

#### ERA:
- Исправлена старая ошибка обработки событий. Запуск события ERM с отключенным ERM также привел к тому, что глобальное событие не было создано. Например, Era и плагины не могли обработать событие OnSavegameRead, если ERM был отключен в момент загрузки сохранения игры.

#### Game Enhancement Mod:
- исправлены неработающие чит-коды;

#### Random Wallpaper Mod:
- удалены лишние файлы;

#### WoG Graphics Fix Lite:
- Обновление мода до версии 2.18.0;

### Версия 2.100

#### ERA:
	- ВНИМАНИЕ! примеры использования всех нововведений находятся в файле /Help/Era manual/era iii Changelog.txt;

- обновление ядра ERA.dll до версии 3.9.14:
	- добавлена поддержка захвата скриншотов:
		-  Добавлена поддержка захвата игровых скриншотов в форматах png/jpg. В era.dll была экспортирована следующая функция:

  			(*
    		Захватывает скриншот и сохраняет его в виде файла. Формат определяется автоматически по расширению. Поддерживаются следующие расширения: 'jpeg', 'jpg', 'png'. По умолчанию также захватывается курсор в игре. Возвращает флаг успеха.

    		'Quality' используется для указания качества сохранения jpeg (0..100).
    		'Flags'   - битовая маска функциональных флагов.

      		TS_FLAG_HIDE_CURSOR = 1; // Скрыть курсор
  			*)
  		- function TakeScreenshot (FilePath: pchar; Quality: integer; Flags: integer): TDwordBool; stdcall;
		- В heroes3.ini добавлена новая опция "Debug.CaptureScreenshotOnCrash". Опция позволяет захватить скриншот при сбое и сохранить его в "Debug/Era/screenshot.jpg".
	- улучшена стабильность выполнения ERM:
		- Добавлено автоматическое сброс отслеживания ERM и восстановление настроек при запуске или загрузке игры.
		- Реализована автоматическая очистка директории "Debug/Era" перед генерацией файлов отладки при сбое.
		
	- улучшены средства отладки:
		- Добавлено API времени выполнения для контроля за отслеживанием ERM. Оно может быть использовано для исключения хорошо протестированной библиотеки из окончательного лога отслеживания ERM или для отслеживания только определенных блоков кода:
			- В heroes3.ini добавлена новая опция "Debug.AllowRuntimeErmTrackingControl". Опция включает или отключает контроль времени выполнения за отслеживанием ERM. По умолчанию она включена и должна быть отключена в случае сложного отслеживания ошибок, когда нельзя доверять никакому коду.
			- В era.dll были экспортированы следующие функции:
				- procedure DisableErmTracking; stdcall; // Приостанавливает отслеживание ERM. Вся ранее отслеженная информация сохраняется.
				- procedure EnableErmTracking; stdcall; // Возобновляет отслеживание ERM.
				- procedure RestoreErmTracking; stdcall; // Устанавливает отслеживание ERM в значение, указанное в heroes3.ini (используемое до манипуляций во время выполнения).
				- procedure ResetErmTracking; stdcall; // Очищает все ранее записанные треки.

	- улучшена стабильность сетевой игры:
		- ### Предупреждение. Использование "OnGameEnter" для ERM хуков в сетевых играх не работает в Era < 3.9.14.

		Добавлена поддержка событий "OnGameEnter" и "OnGameLeave" в сетевых играх. Ранее передача сохраненной игры и загрузка на удаленной стороне вызывали "OnAfterSavegameLoad", но не "OnGameLeave" + "OnGameEnter". Поэтому использование плагина erm_hooker с событием "OnGameEnter" приводило к сбросу хуков после первого конца хода.
		  В сетевых играх последовательность событий после конца хода на удаленной стороне следующая:
		  
		    "OnGameLeave"     - здесь мы восстанавливаем патчи UN:C и снимаем хуки erm_hooker
		    "OnSavegameRead"  - чтение переданного сохранения
		    "OnAfterLoadGame" - полностью загруженное переданное сохранение
		    "OnGameEnter"     - установка патчей UN:C и ERM хуков снова

	- прочее:
		- Обновлен плагин erm_hooker.era и карта отладки (map-файл)
		- "OnAdvMapTileHint" был переименован в "OnAdventureMapTileHint". Предыдущее название устарело, но сохранено для совместимости.
		- Рефакторинг модуля внутренних настроек.
		- Диалог выбора IP больше не будет отображаться на экране настройки мультиплеера, если на ПК доступен только один IP-адрес.
		- Исправлено отслеживание команд ERM с ';' внутри строковых литералов (например, \^...;...\^).
		- Исправлено неточное определение местоположения и строки по адресу в модуле DebugMaps.
		- Исправлена карта отладки плагина buttons.dll (map-файл)
		- Устаревшее событие 'OnAbnormalGameLeave' больше не поддерживается. Способ HD мода вернуться с экрана боя в основное меню игры больше не поддерживается.
		- После события "OnGameLeave" выполнение ERM отключается. Триггеры MP3 и реального времени больше не выполняются вне основного цикла игры. Ранее триггеры выполнялись в контексте главного меню игры.
		- Исправлена ошибка, блокировавшая трэкинг ERM при вылете из игры;

#### Random Wallpaper Mod:
- Добавлена новая для всех меню;
- Заменён логотип в главном меню;
- Исправлены "пустые" картинки;
- Удалены .pac/.vid файла из-за ненадобности;

#### WoG:
- Исправлен баг опыта существ из прошлых обновлений;

#### WoG Scripts:
- Исправлена логика обновления банков существ;
- "Изменённые монстры": фикс скорости Архидьяволов;
- Улучшенные Военные Машины III: Исправлено лечение вражеских юнитов;

#### Other:
- Переименованы триггеры "OnAdvMapTileHint" на "OnAdventureMapTileHint";
- TrainerX/Enhanced Henchmen моды теперь тоже поддерживают мультиязычность;


### Версия 2.99

#### ERA Scripts:
- Исправлено затирание описания Вуали Тьмы;
- Временно отключена анимация появление "Ассасинов" из-за вылета во время битвы;

#### Enhanced Henchmen:
- Добавлена поддержка динамической смены языка;

#### TrainerX:
- Добавлена поддержка динамической смены языка;

#### WoG Scripts:
- Исправлено восполнения банков существ;

### Версия 2.98

#### Other:
- восстановлены недостающие файлы; 

### Версия 2.97

#### ERA:
  - ВНИМАНИЕ! примеры использования всех нововведений находятся в файле /Help/Era manual/era iii Changelog.txt;

- обновление ядра ERA.dll до версии 3.9.13:
  - Улучшена устойчивость к исключениям для механизма ERM (триггеры и команды). Очистка памяти ERM выполняется в исключительных случаях, что позволяет повторно использовать механизм ERM позже после восстановления. Исключения могут использоваться, например, для быстрого выхода из глубоко вложенных диалогов.
  - Улучшена обработка сбоев/исключений. Обработчики HD и WoG вообще не вызываются. Обработчик Era вызывается только один раз. Отчеты о сбоях становятся более стабильными и точными. Раньше могло возникнуть несколько исключений, которые переопределяли одни и те же журналы.
  - Добавлена экспериментальная (может быть удалена) экспортированная функция выхода из любого диалога в главном меню игры.
  - Командиры без флага UNDEAD теперь также обрабатываются Эликсиром Жизни. Плагины могут переопределять экспортированную функцию IsElixirOfLifeStack для реализации другого поведения.
  - В era.dll добавлены экспортированные функции, дополнительные шаги по переносу жестко закодированной механики WoG в заменяемый формат API. Установщики API возвращают ранее установленные функции реализации или ноль.
- Кнопка запуска диалога выбора языка теперь работает и в окне кампаний;

#### Advanced Classes Mod:
- Выстрел Артиллерии теперь не может атаковать свои войска, когда активной стороной является вражеская;
- В многопользовательских играх текст способностей наборов "Estate/Natural Healer/Secret" не будет отображаться для удаленного игрока.
- Исправлена проблема в многопользовательских играх, когда была возможность выбора заклинания вражеского командира (класс "Archmage/Warden") во время боя, что приводило к десинхронизации.
- Теперь немного сложнее получить высокие значения статистики для заклинаний "Молитва" и "Благословение".
- Различные исправления для многопользовательских игр.
- Заклинание "Dispel" теперь относится к воздушной магии, и в компенсацию "Disguised" перемещено в водную магию.
- Исправлено сообщение о бонусе набора "Разведка" перед боем.
- Исправлено: Огненный маг больше не пропускает бросок огненного шара после атаки, если он изучил умение "Strike all around".
- Исправлено: Магоги не наносили урон своим войскам, если они загипнотизированы.

#### Game Enhancement Mod:
- Заменена иконка мифрила на панели ресурсов @Grossmaestro;
- Удалена замена тумана войны;

#### Enhanced Henchmen:
- Исправлено неиспользование ИИ знамён полководца на оруженосцах;

#### TrainerX:
- удаление артефактов ранее не вызывало оригинальное событие снятия;
- Исправлено затирание имения артефакта "Зеркало" при открытии карты;
- Исправлено срабатывание открытия диалога дополнительных опций при нажатом "Ctrl";
- Исправлено некорректное удаление артефактов из структуры героя;

#### Random Wallpaper Mod:
- Переписан плагин логотипа; добавлена поддержка отрисовки поверх видео и управлением именем и положением картинки в обоих меню;

#### WoG Scripts:
- Артиллерия: исправлен стартовый выстрел баллисты. Теперь урон наносится согласно описанию на 100/200/300% от обычного урона отряда;
- Добавлена поддержка восполнения новых банков существ;
- Исправлено возможное отключение опыта отрядов при переигровке боя.

#### Other:
- Добавлены файлы предпросмотра кампаний Клинка Армагеддона;
- В некоторых модах добавлена поддержка динамической смены языка
- Небольшие правки описаний;


### Версия 2.969

#### ERA:
- обновление ядра ERA.dll
	- уменьшена регенерация Эликсиром Жизни до 100 hp;
	- добавлена экспортируемая ф-ция SetStdRegenerationEffect для плагинов;
	
#### Random Wallpaper Mod:
- Исправлена невозможность выбрать размер карт в диалоге выбора сценария;


### Версия 2.968

#### ERA:
  - ВНИМАНИЕ! примеры использования всех нововведений находятся в файле /Help/Era manual/era iii Changelog.txt;

- обновление ядра ERA.dll до версии 3.9.12:
  - Реализованы расширенные средства синхронизации памяти ERM в сетевых играх.
  - Добавлена команда !!IP:M для пометки ассоциативных переменных (SN:W, i^^, s^^) для дальнейшей синхронизации.
 Синтаксис:
 !!IP:M^имя_переменной_1^/^имя_переменной_2^/...;
 !!IP:M0/^array_var_name_1^/^array_var_name_2^/...;
  - Добавлена команда !!IP:S для синхронизации всех отмеченных переменных и массивов. Используйте !!IP:D, чтобы указать цели для синхронизации.
  После его вызова кэш отмеченных переменных очищается.
  !!IP:S автоматически вызывается непосредственно перед отправкой сетевого события "начало боя" с помощью !!IP:D-1.
  - В Era Erm Framework добавлены константы GAME_TYPE_XXX (см. 5-й параметр UN:V).
  - В Era Erm Framework добавлены следующие глобальные переменные:
  i^battle_isActingSideUiUser^: bool. Имеет значение TRUE, если действующий побочный игрок является локальным человеком и, следовательно, может использовать все действия пользовательского интерфейса.
  Используйте его, чтобы запретить неактивному сетевому проигрывателю выполнять действия пользовательского интерфейса по изменению состояния.
  - В Era Erm Framework добавлены следующие функции:
  - !?FU(Array_Move);
  Копирует часть массива в другую часть массива, разумно перезаписывая существующие значения.
  - !?FU(Array_Splice);
  Удаляет указанное количество элементов из начального индекса и впоследствии вставляет новые элементы в ту же позицию.
  - !?FU(ActivateNextStack);
  Находит и активирует следующий стек. Возвращает TRUE в случае успеха и FALSE, если никто не может двигаться на этом этапе.
  - Реализована возможность выбора желаемого IP для многопользовательской игры.
  Игра  использует первый найденный IP-адрес ПК, при этом ПК может принадлежать нескольким сетям: LAN, WLAN, Virtual LAN, Интернет (белый IP-адрес).
  - В era.dll добавлены следующие экспортированные функции:
	- Выделяет новый идентификатор функции и привязывает его к указанному имени, если имя свободно, в противном случае возвращает уже связанный идентификатор.
	Эту функцию можно использовать для реализации пользовательских событий ERM в плагинах.
	Результатом будет 1, если был выделен новый идентификатор, и 0 в противном случае.
	функция AllocErmFunc (FuncName: pchar; {i} out FuncId: целое число): TDwordBool; stdcall;
	typedef bool (__stdcall* TAllocErmFunc) (const char* EventName, int32_t &EventId);

  — Добавлено новое событие для плагинов/Lua: "OnAfterReloadLanguageData". Это происходит всякий раз, когда Era перезагружает все языковые данные JSON с диска.
  - Переписана поддержка способности регенерации существ.
  (!) Плагины не должны перехватывать код регенерации и вместо этого должны использовать API Era 'SetRegenerationAbility'.
  — Экспортирована функция SetRegenerationAbility в era.dll только для плагинов (например, для новых плагинов существ).
  — Удалена опция "FixGetHostByName" в файле Heroes3.ini.
  - Исправлена ошибка: индексы локальных статических строковых массивов неправильно рассчитывались для неконстантных индексов в скриптах ERM 2, например. (arr[i]).
  - Исправлена ошибка в VFS.dll, из-за которой ERA не работала на Wine. Параметр пустой маски для NtQueryDirectoryFile обрабатывался как '*'#0 вместо '*'.

#### Advanced Classes Mod:
- добавлены исправления сетевого кода, игра теперь требует ERA 3.9.12;
- Исправлено поведение невосприимчивости Мага Огня, если он был загипнотизирован.
- Переработана переработка Огненного Щита. Теперь вместо проверки идентификатора существа, чтобы узнать, должны ли они быть невосприимчивы к Огненному щиту, мы используем крючок, чтобы проверить, должны ли они быть. Это также не позволяет "Огненному щиту" визуально показывать наличие у цели иммунитета.
- Добавлен FU(ACM_GetCustomFireShieldMultiplier), вызываемый сторонними скриптами для определения дополнительного урона от Огненного щита, наносимого конкретными монстрами.
- Исправлена совместимость MP таблицы заклинаний Архимага/Стража. Теперь вы не можете выбрать заклинание для своего противника.
Логика заклинаний командира (для Архимага и Стража) воссоздана.
- Теперь вы можете выбирать заклинание как в бою, так и вне его.
- Частично исправлена поддержка MP - теперь в PvP бою смена типа заклинания командира будет отражаться на другую сторону.
- Маг огня: теперь их атака Огненного шара/Инферно игнорирует иммунитет к заклинаниям враждебного юнита, а также защищает свои юниты.
- Опыт паладина и грубое золото: исправлены многочисленные логические сбои.
- Опыт паладина: теперь максимальный бонус опыта от урона составляет 10 миллионов.
(со всеми бонусами. Значение может быть больше без переполнения, только для баланса)
- Добавлены константы класса командира (для удобства настоятельно рекомендуется добавить новый .erm со всеми константами ACM)
- Сброс купленных заклинаний при покупке командира в городе.
- Исправлен ИИ, не использующий заклинания вызова элементалей.
- Добавлены новые названия классов для искателей приключений каждой фракции.
- Исправлена ошибка скрипта командира "Удар со всех сторон".
- Исправлено обновление экрана при надевании второго одноименного артефакта

#### ERA Scripts:
- "Гноллы-мародёры бьют первыми": исправлено наложение Огненной Стены Пожарами, если их убивали Гноллы;
- Смертные герои: исправлена функция переноса кампании.

#### Game Enhancement Mod:
- переписан плагин и скрипт получения локальной и удалённой версии. Для получения локальной версии теперь используется ф-ция, возвращающая строковое значение: "!!FU(gem_GetGameVersion):P?(gameVersion:z);";
- добавлена проверка на наличие сохранённых настроек ВоГ-опций и предупреждение о необходимости сохранить, если они отсутствуют;
- Добавлен ArchBugFixes.era [исходники](https://github.com/Archer30/Era-Plugins/tree/main/ArchBugFixes);
- Обновлена prima.dll: исправлена ошибка, из-за которой очки заклинаний не удваивались при посещении Вихря Маны, когда у героя было >127 знаний.

#### Enhanced Henchmen:
- Исправлена функция переноса кампании.

#### Random Wallpaper Mod:
- переписан плагин добавления логотипа для исправления вылета при попытке открыть окно загрузки игры;

#### TrainerX:
- добавлено корректное открытие карты после увеличения радиуса видимости героя;

#### WoG:
- Добавлен плагин "ERA_MultilingualSupport.era", позволяющий менять язык загруженных ресурсов из Lang/.\*json при наличии локализации. Список и параметры локализаций указывается в файле /Mods/WoG/Lang/era.json;

#### WoG Scripts:
- Нейтральный город: фиксированные элементальные существа не могут быть улучшены в крепостях на холмах. Исправлена опция нейтрального города, отключающая опцию Rampart Faerie Dragon.
- Добавлено исправление, предотвращающее появление случайных монстров на карте.
- Исправлено неправильное отображение внешних жилищ, дающее дополнительный рост существам в городе.

#### Other:
- добавлен недостающий файл /Tools/H3DefTool/Grid.pcx для запуска H3DefTool;
- добавлен недостающий файл h3wmaped_unleashed.exe для запуска расширенного редактора карт;
- добавлен мануал по отключению DEP (Help/DEP_tutorial.html);
- удалены лишние файлы инструментов;

### Версия 2.967

#### Advanced Classes Mod:
- Призыв элементаля: Теперь мы используем нативный способ призыва элементаля, исправили тень на поле боя, значок книги заклинаний и, возможно, другие проблемы.
- Исправлена ошибка, из-за которой **ГМ Зыбучие пески** мешал подсветке.
- Классы командиров теперь защищен от повторного воспроизведения.
- Теперь количество убийств добавляется только после убийства (а не до него). Это также исправляет ситуации, когда убийство не считается действительным, например, из-за блокирующих или отражающих способностей атакующего юнита, которые могут предотвратить убийство, или если атакующий юнит умирает в процессе (например, от ожогов от **Огненного Щита**).
- Исправлена ошибка, из-за которой **Стойкий Часовой** не давал 10% сопротивления, как указано в описании.
- Некоторые изменения формата.
- Теперь мы используем хук вместо воспроизведения **UN:C** в нужное время, чтобы охватить все в игре и упростить наш код.
- Это исправило проблему с неправильным отображением количества очков заклинаний в бою ([ссылка](https://discord.com/channels/580473641104310301/580473641104310305/1238718760123109407)).
- Исправлена неправильная проверка условия для 8-го существа **TUM**.
- Исправлена невозможность воскрешения **Привидений**.
- Исправление и балансировка **Фортуна**.
- **ГМ Фортуна** теперь:
	- крадет 2 скорости, 3 урона, 4 атаки или 4 защиты при атаке (немного меньше, чем ранее);
	- уважает иммунитет к заклинаниям (черные драконы по умолчанию не могут быть украдены);
	- минимальная скорость теперь 2;
	- если недостаточно характеристик для кражи, в журнале боя отображается точное украденное значение.
- Небольшая коррекция отображения восстановления очков заклинаний.
- Улучшения секретного класса.
- Исправлена дублированная опция в "Выборе класса" (в начале игры). Теперь одна из них задает вопрос после 2 уровней.
- Исправлено обнаружение набора артефактов. Теперь экипировка двух артефактов с одинаковым названием не уменьшает количество частей набора.
- Максимальное количество убийств для **Командиров** теперь 9999 (визуальное изменение).
- Теперь ИИ также может улучшать характеристики своего набора класса с каждой победой (если ему удается украсть его у человека). Они не выпадают сами из-за условия &1000.

### Game Enhancement Mod:
- Исправлена ошибка с первым действующим юнитом, когда скорость двух стеков одинакова;
- Переписана функция GetTime;
- Обновлена функция проверки версии;

#### WoG (Wake of Gods):
- Добавлен список локализаций для будущего диалога смены языка;

#### WoG Scripts:
- Убрано исправление ошибки атаки в ближнем бою для военных машин, так как оно уже представлена в плагине;
- Улучшенные Боевые машины III: Исправлена возможность лечения враждебных стеков;
- Рыболовный колодец: исправлено небольшое сообщение инициализации;


### Версия 2.966

#### Advanced Difficulties Mod:
- Теперь способности по набору опыта для дальнобойных существ больше не будут применяться к ближнему бою.
- Уменьшена скорость накопления стражей для крестьянских банков TUM.
- Добавлена проверка, чтобы предотвратить выполнение ошибочного значения.
- Нейтральные сложности: теперь при нажатии на кнопку сброса также будет отключаться смешанный нейтральный режим, если он был включен.

#### Advanced Classes Mod:
- Исправлена возможная ошибка erm с некромантией;
- Когда включен Орлиный Взгляд I (заклинание обучения при повышении уровня), оно будет удалено, если в будущем нельзя будет изучить заклинание. Теперь, если включен ACM, эта механика не будет активирована.
- Диалог улучшения Боевой Машины: исправлена интеракция при нажатии на кнопку улучшения без выбора улучшения
- Усиление заклинания "Минное поле" с помощью следующих изменений:
	- Теперь заклинание можно использовать, если на стопке противника есть местные существа территории
	- Местные существа территории будут видеть минное поле как обычно, но получат урон от мин (это изменение должно быть пересмотрено после последних тестов)
	- Улучшена способность Арканного Пророка (теперь увеличение урона показывается при начале боя и не выбирается случайным образом перед каждым использованием. Увеличение урона непосредственно видно в книге заклинаний). Обновлено описание артефактов артефактов SP Reg.
	- Преимущество концентрации друидов теперь работает с повтором битвы.
	- Умение лорда или грабеж города теперь имеет перезарядку 2 недели для каждого города.
	- Исправлено имя умения Мастер Воин. Гибридные классы теперь получают такое же количество критических попаданий, как и Мастер Воин.
	- Пассивная способность командира грубиянов теперь также работает для защищающегося героя.
	- Исправление длительности гипноза благодаря SadnessPower
- Улучшено взаимодействие мыши при нажатии на значок удачи на экране героя
- Улучшено взаимодействие мыши (включить или выключить стандартное действие или когда отключить и т. Д.)
- Исправлено имя секретного класса, которое может быть раскрыто до его разблокировки.
- Экспорт некоторого текста в erm в json
- Удалено неиспользуемое содержимое таблицы искусства TUM
- Баланс класса Снайпер. Теперь ХП как урон составляет 7% + 1% за каждые 7 убийств (как обсуждалось). Максимальное значение достигается при 50%. Для боссовых существ (MA:P >= 5000) максимальное значение уменьшается вдвое (25%).
- Теперь режим 10 навыков включается автоматически, когда в игре можно получить более 10 навыков, даже если 10ss или другой плагин, увеличивающий лимит навыков, включен после начала игры.
- Расширена область кликабельности acmlist.txt - информация о продвинутом классе командира повышена, чтобы ее было удобнее нажимать.
- Поставьте знак "+" перед статическим бонусом скорости в acmlist.txt. Так мне будет легче понять.
- ACM - горячие клавиши на экране героя:
	- Нажмите A - текущий продвинутый класс
	- Нажмите W - информация о продвинутых классах
	- Нажмите E - таблица бонусов
	- Нажмите R - таблица тренера заклинаний (если включено)
- Исправлено, что Альтернативная Некромантия позволяет выбирать существа более высокого уровня для воскрешения, даже если уровень Некромантии не соответствует требованиям.
- ACM Усадьбы отображаются в Обзоре Королевства;
- Больше не отключают Альтернативную Некромантию по умолчанию при включении TUM, так как они теперь совместимы.
- Разведка: теперь она поддерживает расширенных монстров. В случайных событиях разрешается только монстры со статусом < уровня 8.
- Дворянство: теперь оно поддерживает 8-го уровня существ (TUM);
- Исправлены очки заклинаний не x10 при призыве элементалей на карте в развитом режиме;
- Пересозданы специалисты по существам. Теперь оно работает стандартным образом, показывает бонусы в диалоговом окне существ, когда не в бою. Работает и для Игниссы.
- Пересоздано правой кнопкой мыши для деталей усовершенствования боевых машин из экрана героя/экрана встречи героя. Теперь функция поддерживает экран встречи героя.
- Исправлена критическая проблема: когда вы проверяете информацию о существе вне боя, иногда отображается информация о командирах (ACM_beforeCreatureInfoDlg_Show).
- Добавлены иконки UN32 для новых специальностей
- Исправлены все взаимодействия с мышью на иконках специализации героя. Теперь левый клик мыши вызовет обычное диалоговое сообщение вместо всплывающего, как и должно быть.
- Отключить бесполезное взаимодействие мыши при установке имен из набора искусства ACM DL. Планируется добавить описание набора, когда нажимается на имена наборов, но управление русским языком не так просто.
- Исправлено умение Лорда Хаарта: иконка и текст
- Пассивная способность командира паладинов теперь работает для защитника
- Заклинания, выученные с помощью Интуиции, будут сброшены в случае Повтора Битвы
- ACM - Отключить функцию рюкзака ACM, исправить совместимость с описанием заклинаний;
- Отключить функцию артефактов рюкзака ACM, освободить артефакты ERA Scripts из запрета, так как опция ES работает немного лучше и, кажется, более приветствуется (поскольку она также работает для артефактов, увеличивающих очки хода).
- Отпустить Гейт Кей из запрета. Теперь его можно использовать для блокировки вашего города, как в WoG. Эффект будет изменен в будущем, когда у нас появятся новые идеи.
- Исправлена совместимость с описанием заклинаний. Теперь неверный текст из книги заклинаний отключен.
- Пассивное умение "Командир - удар со всех сторон" теперь не показывает -10% бонуса к атаке в таблице бонусов ACM
- Добавлено условие безопасности для скрипта "Командир - удар со всех сторон" для вторичных целей.
"; Этот скрипт не будет работать, если атакующий, защищающийся и вторичные цели находятся на одной стороне (возможно с Берсерком)
; Чтобы решить эту проблему, нам нужно ввести новый хук, чтобы получить фактический атакующий стек. Но это редкая ситуация, поэтому мы пока не делаем этого"
- Исправлено взаимодействие мыши с иконкой очков заклинаний (для LMB действие мыши должно быть 12, а не 13)
- Переработаны все добавления очков хода. Теперь вам не нужно беспокоиться о том, что максимальное количество очков хода изменится после открытия экрана героя. Исправлено то, что Умение "Мастер Путь" не дает вам по крайней мере 1700 очков хода каждый ход. Исправлено то, что Мастер/Великий Мастер Логистики не работают с Логистической специальностью.
- Пересмотрено отображение специализаций существ. Теперь все бонусные статистики, включая местные, отображаются в описании специализации существа.
- Исправлено, что Анциент не получает +4% после 100 убийств
- Исправлена утечка памяти для описания Боевых Машин на поле боя
- Переработан эффект стока. Теперь он должен работать точно так же, как и стандартный механизм Вампиризма. Скажите мне, если что-то отличается

#### Enhanced Henchmen:
- Исправлено невозможность изменения помощников, когда в армии героя находится только одно существо;
- Исправлен текст "Отмена";

#### ERA ERM Framework:
- FU(UpdateNextStackTurn) будет выполнен один раз в !?FU(OnBattleRound_Quit)&i^battle_round^=0, чтобы убедиться, что порядок ходов не нарушен скриптами.

#### ERA Scripts:
- Исправлены неограниченные призывы скелетов из опции Артефактов Скелета;
- Исправлено падение игры при жертвоприношении Дьявола
- 28 Вторичных Навыков: Улучшена совместимость с плагинами, изменяющими количество вторичных навыков.
- Дальнобойный Смертельный Взгляд: Теперь навык не работает на командиров и существ 8 уровня (несмотря на то, что существа 8 уровня могут подвергаться действию ближнего смертельного взгляда). Исправлены ошибки erm. Оптимизированы подсказки мыши. Исправлены ошибки erm. FU(ES_995_CheckIfStackAffectedByDeathStare) может использоваться скриптерами, чтобы исключить свой стек из действия дальнобойного смертельного взгляда.
- Ночная Разведка: Исправлено, что Ассасины не появляются.

#### Game Enhancement Mod:
- исправлен редкий вылет в битве;
- Обновление "Game Bug Fixes Extended":
	- Исправлена тень курсора силового поля для защищающегося игрока;
	- Исправлено возможное застревание, когда ИИ воскрешает убитый стек;
- Изменено исправление переполнения значения ИИ от деления значения ИИ существ на 15 до 10. Это смягчает проблему того, что ИИ становится намного менее агрессивным после деления.
- Пересоздан призыв Драконьего Сердца так, как это было изначально, так как в оригинале можно вызвать драконов, перекрывающих другие юниты ([Обсуждение](http://wforum.heroes35.net/showthread.php?tid=4218&pid=138936#pid138936))
- Добавлено общее исправление, чтобы в новый день максимальные и текущие очки хода были равны для каждого героя - это помогает предотвратить некоторые особенности WoG и сценарии, мешающие этому;

#### Secondary Skills Scrolling:
- Исправлена неработающая кнопка тактики, когда навык "тактика" не находится на текущей странице навыков героя;

#### TrainerX:
- Теперь отключение/включение событий, строительство/разрушение городских зданий все равно будет работать, когда событие/город находится под нажатием героя.
- Добавлен обратный режим бога, активируемый щелчком на портрет героя в основном интерфейсе тренера с зажатой клавишей Shift, по сути, все установить на минимум.
- Исправлены некоторые ошибки в функции Отображения Событий
Примечание: Поскольку теперь Отображение Событий зависит от хука erm для работы, загрузка TrainerX во время игры с помощью F12 требует одного дополнительного шага: сохранение игры и загрузка.
- Улучшена возможность TrainerX загружаться после начала игры. Теперь вам не нужно нажимать F12 + Сохранить и Загрузить (достаточно только F12), когда загружаете TrainerX после начала игры
- Исправлена возможная ошибка erm при проверке экрана героя из основного диалогового окна TrainerX.
- Режим бога теперь может использоваться, когда нет героя для изменения видов карты и ресурсов.

#### WOG:
- Исправлено жилище Обители Эфритов и Повелителей Ям в zlagport.def

#### WoG Fix Lite:
- обновлено до версии 2.17;
- [Исправлен спрайт Священного Феникса](https://discord.com/channels/665742159307341827/741855494276382801/1232159404359680041)

#### WoG Scripts:
- Теперь Рынок Времени на карте Титановой Зимы работает правильно;
- Оптимизирована совместимость с Искусством Войны;
 - Изумрудная Башня: Добавлено Живое усиление;
 - Мифрил: Теперь эффекты мифрилового усиления на Ветряные Мельницы/Водяные Колеса являются постоянными (как в WoG 3.58f. Не уверен, почему это было изменено. Стоимость улучшения более разумная для постоянного улучшения);
- Взаимоотношения Существ: Исправлено, что тип существа исказился после конфликта;
- Исправлено, что Война не устанавливает все навыки сразу;
- Улучшенные Монстры: Исправлено, что Дьяволы могли получать бесплатную скорость с активированными фазами тактики в бою
- Улучшенные Артефакты I: Теперь сообщение о Подвеске Второго Зрения, Подвеске Свободной Воли и Накидка Сопротивления будет показано только в случае активации их эффектов. Исправлена невозможность обмена Гарнитуры Мешающего на магический навык по понедельникам.
- Теперь все сценарии замены монстров/артефактов игнорируют настраиваемые нейтральные стеки и артефакты на карте.
- Первая Помощь I: Предотвращен эффект от воскрешения существ, когда исходные войска полностью уничтожены.
- Оруженосцы: Небольшая оптимизация выбора Оруженосца ИИ
- Изумрудная Башня: Исправлены имена существ после усиления.
- Изумрудная Башня: Уточнение информации, когда у игрока недостаточно для оплаты.
- Алтарь Трансформации: Исправлено, что нейтральные существа не могут быть преобразованы.
- Изумрудная Башни: Теперь ИИ больше не будет улучшать Нежить или Живые существа, так как они не могут использовать их должным образом.
- Исправлено запрещение заклинаний от Ученых: Теперь заклинания, отключенные с карты (вместо из настроек wog), не будут запускать сценарий запрещения заклинаний от Ученых.
- Исправлена подсказка поддержки горячего кресла для Улучшенных Боевых Машин III
- Изумрудная Башня: Исправлено отображение двойных диалогов при возврате платы за запись (6 камней).


### Версия 2.965

#### Game Enhancement Mod:
- восстановлена кнопка завершения хода;

#### WoG Scripts:
- Исправлена замена запрещенных заклинаний у ученых;
- Перенесено знамя полководца от оруженосца в рюкзак героя после его смерти - спасибо Archer30;
- Небольшие исправления текста;

### Версия 2.964

#### ERA ERM Framework:
- добавлены константы о типах квестов и наградах;
- добавлена функция обновления всех квестов на карте (не влияет на пользовательский текст);

#### Game Enhancement Mod:
- добавлено смещение 8 пикселей для отрисовки пользовательских диалогов рядом с границами окна игры;;
- убрано создание лишних pcx;

#### WoG Scripts:
- Исправлено описание "Артефактов Дипломатии" при включении Улучшенных Артефактов I/II и "Дипломатических Торгов" - спасибо Archer30;
- Улучшенные командиры: перемещено место для выхода из хука (хотя для командира разницы не будет) - спасибо Archer30;
- Исправлено убийство нейтралов со случайными героями, не позволяющее выполнить соответствующий квест в хижине провидца - спасибо Archer30;
- "Живые свитки" и "Усиленные специализации героя": удалены автоматические применения на обездвиженные вражеские отряды;

#### ERA Scripts:
- Захват мельниц и садов: добавлена проверка координат, так как был отчет о неверных координатах - спасибо Archer30;

#### TrainerX:
- Теперь удаление существ или героев на карте также завершает соответствующий квест в хижине провидца - спасибо Archer30;

### Версия 2.963

#### Game Enhancement Mod:
- Исправлено перемешивание юнитов в замках (в крепости и сопряжении были копейщики);

#### WoG Scripts:
- Новые боевые поля: исправлены нерабочие поля - спасибо Yuritsuki;

#### ERA Scripts:
- Захват боевых машин: исправлен вылет при захвате иных артефактов;
- Ночная разведка: исправлен нерабочий переключатель ассасинов;

### Версия 2.962

#### Game Enhancement Mod:
- Убраны хардкорные правки памяти;

#### WoG Scripts:
- Искусство войны: исправлен сбой, когда ИИ пытается получить один из навыков Искусства войны;

#### ERA Scripts:
- Подавление стихий: исправлена возможность потери магических навыков после боя - спасибо Archer30;
- Захват боевых машин: исправлено исчезновение захваченных боевых машин;
- Удалены неиспользуемые скрипты и текст для Capture War Machines - спасибо Archer30;
 
### Версия 2.961

#### Game Enhancement Mod:
- Добавлено несколько скриптов для 1 апреля;
- Форты на холмах - стоимость улучшения рассчитывается на основе уровня улучшенного монстра, а не уровня текущего монстра - благодаря Archer30;
- Исправлен скрипт ограничения максимального уровня героя - спасибо Archer30;
- Оптимизирован гибкий ввод читов. Теперь пробел перед первым словом будет игнорироваться — благодаря Archer30.

#### WoG Scripts:
- Улучшенные артефакты II: Исправлено Кольцо Мага и его компоненты, которые могут не работать для увеличения урона от заклинаний - благодаря Archer30.

#### Advanced Classes Mod:
- Исправлена возможность изучения заклинаний из Артефактов с помощью GM Scholar - благодаря Archer30;
- Добавлен фикс для будущего TUM Full - спасибо Archer30;
- Обновлена графика Волшебной Палочки для совместимости с TUM - благодаря Archer30;
- Обновлена локализация - Большое спасибо DrD_AVEL_;
- Исправлено снижение уровня некромантии, работающее только для атакующего героя.
- Исправлена альтернативная некромантия, устанавливающая скорость некромантии вместо ее ограничения - благодаря Archer30;
- Грааль в Некрополисе вновь дает 20% бонус к Некромантии (вместо 10%) - благодаря Archer30;
- Исправлен текст Усилителя Некромантии (он дает бонус 5% вместо 10%) - спасибо Archer30;
- Оптимизирован диалог Альтернативной Некромантии. Теперь игра запоминает последний выбор героя. По умолчанию показано настоящее существо, которое нужно поднять (вместо скелетов) — благодаря Archer30;

### Версия 2.96

#### ERA:
- Обновлена до версии 3.9.11 - спасибо Berserker;
- Обновлен плагин "game bug fixes extended.dll" - спасибо igrik;

#### HD mod:
- Обновлен до версии 5.4 R86 - спасибо baratorch;

#### ERA ERM Framework:
- Добавлена инициализация i^battle_round_^ при переигровке битвы - спасибо Archer30.

#### Game Enhancement Mod:
- Добавлена функция гибких читов. Теперь поддерживаются все чит-коды от RoE/AB/SoD. Если чит-код введен с другой несвязанной информацией, он также будет распознан и применен — спасибо Archer30.
- Улучшено исправление для гильдий магов в восстановленных городах (после сноса): теперь в гильдиях будут появляться заклинания высокого уровня. Добавлена поддержка исследования заклинаний - спасибо Archer30.

#### WoG Scripts:
- Новые банки существ: теперь, когда охранники "Потерянных бутылок" побеждены, героя спросят, стоит ли забрать бутылку. Если взять бутылку, герой может прочитать случайное сообщение внутри, и бутылка навсегда исчезнет с карты — спасибо Archer30.

#### ERA Scripts:
- Пользовательские основные навыки: исправлена возможность распределения Первичных Параметров при повышении уровня - спасибо Archer30.

#### Advanced Classes Mod:
- Исправлена возможность изучения заклинаний из Артефактов с помощью GM Scholar - спасибо Archer30.
- Добавлено исправление для будущего TUM Full - спасибо Archer30.
- Обновлена графика Волшебной Палочки для совместимости с TUM - спасибо Archer30
- Обновлена локализация - спасибо PerryR;

#### Advanced Difficulties Mod:
- Заменен значок основных навыков на оригинальный стиль H3 (был в WoG) - спасибо Archer30.

#### TrainerX:
- Добавлен режим Бога. Щелкните Alt-клик по портрету героя, чтобы максимально использовать Армию/Движение/Ману/Полет/Основные навыки/Вторичные навыки/Заклинания/Видение карты/Ресурсы - спасибо Archer30
- Добавлен щелчок с нажатой клавишей Ctrl/Alt/Shift по названию вторичных навыков, чтобы управлять всеми вторичными навыками одновременно – спасибо Archer30.
- Исправлена ошибка, из-за которой прокрутка основных навыков не работала правильно, когда статистика превышает 127 - спасибо Archer30.
- Теперь открытие экрана героя из трейнера позволит редактировать любые данные героя (а не только просмотр) - спасибо Archer30;
